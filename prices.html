<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="images/icon-192.svg">
  <title>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ 2026 â€” Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ø¹Ø§Ø± Ø´Ø§Ù…Ù„Ø© | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­</title>
  <meta name="description" content="Ø£Ø³Ø¹Ø§Ø± Ø£ÙƒØ«Ø± Ù…Ù† 200 Ù…Ø·Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ Ù…Ø¹ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø©. ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆØ§Ù„ÙØ¦Ø© ÙˆØ§Ù„Ù…Ø·Ø¹Ù….">
  <meta name="keywords" content="Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶, Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ø¹Ø§Ø±, Ù…Ù†ÙŠÙˆ, Ù…ÙŠØ²Ø§Ù†ÙŠØ©, Ø£Ø±Ø®Øµ Ù…Ø·Ø§Ø¹Ù…">
  <link rel="canonical" href="https://treklaps.github.io/riyadh-places/prices.html">
  <meta property="og:title" content="Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ 2026 â€” Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ø¹Ø§Ø± Ø´Ø§Ù…Ù„Ø©">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:description" content="Ø£Ø³Ø¹Ø§Ø± Ø£ÙƒØ«Ø± Ù…Ù† 200 Ù…Ø·Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶">
  <meta property="og:url" content="https://treklaps.github.io/riyadh-places/prices.html">
  <meta property="og:locale" content="ar_SA">
  <meta property="og:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1628">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Tajawal',sans-serif;background:#0a1628;color:#e0e0e0;direction:rtl;min-height:100vh}
    a{color:#c9a84c;text-decoration:none}
    .header{background:linear-gradient(135deg,#0a1628 0%,#1a2a4a 100%);padding:12px 20px;position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(201,168,76,0.2)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:auto}
    .logo{text-decoration:none;color:#c9a84c;display:flex;align-items:center;gap:8px}
    .logo h1{font-size:1.2rem;margin:0}
    .back-link{color:#c9a84c;font-size:14px}
  </style>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .hero{background:linear-gradient(135deg,#0a1628 0%,#162040 50%,#1a2d50 100%);padding:50px 20px 45px;text-align:center;position:relative}
    .hero::after{content:'';position:absolute;bottom:0;left:0;right:0;height:4px;background:linear-gradient(90deg,transparent,#c9a84c,transparent)}
    .hero h2{font-size:2rem;font-weight:900;margin-bottom:10px;color:#fff}
    .hero h2 span{color:#c9a84c}
    .hero p{color:rgba(255,255,255,0.7);font-size:16px;max-width:600px;margin:0 auto;line-height:1.8}
    .stats-bar{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin-top:20px}
    .stat-item{background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);border-radius:12px;padding:10px 18px;text-align:center}
    .stat-item .num{font-size:1.4rem;font-weight:900;color:#c9a84c}
    .stat-item .lbl{font-size:12px;color:rgba(255,255,255,0.6)}

    .container{max-width:1200px;margin:0 auto;padding:20px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:20px}
    .search-input{flex:1;min-width:200px;padding:12px 16px;border-radius:12px;border:1px solid rgba(201,168,76,0.3);background:#1c2333;color:#e0e0e0;font-family:inherit;font-size:15px}
    .search-input::placeholder{color:#666}
    .search-input:focus{outline:none;border-color:#c9a84c}
    select.filter-select{padding:12px 16px;border-radius:12px;border:1px solid rgba(201,168,76,0.3);background:#1c2333;color:#e0e0e0;font-family:inherit;font-size:14px}
    
    .budget-section{background:#1c2333;border-radius:16px;padding:20px;margin-bottom:24px;border:1px solid rgba(201,168,76,0.15)}
    .budget-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .budget-label span{font-size:15px;font-weight:600}
    .budget-value{color:#c9a84c;font-size:1.3rem;font-weight:900}
    .budget-slider{width:100%;-webkit-appearance:none;height:6px;background:linear-gradient(to left,#c9a84c,#0a1628);border-radius:3px;outline:none}
    .budget-slider::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:#c9a84c;cursor:pointer;border:3px solid #0a1628}
    .budget-quick{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .budget-btn{padding:6px 14px;border-radius:20px;border:1px solid rgba(201,168,76,0.3);background:transparent;color:#c9a84c;font-family:inherit;font-size:13px;cursor:pointer;transition:all 0.2s}
    .budget-btn:hover,.budget-btn.active{background:#c9a84c;color:#0a1628}

    .result-count{color:#888;font-size:14px;margin-bottom:16px}
    
    .restaurant-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:16px}
    .restaurant-card{background:#1c2333;border-radius:16px;overflow:hidden;border:1px solid rgba(201,168,76,0.1);transition:all 0.3s}
    .restaurant-card:hover{border-color:rgba(201,168,76,0.3);transform:translateY(-2px)}
    .card-header{padding:16px 20px;border-bottom:1px solid rgba(201,168,76,0.1);display:flex;justify-content:space-between;align-items:center}
    .card-name{font-size:17px;font-weight:700;color:#c9a84c}
    .card-name-en{font-size:12px;color:#888;font-weight:400}
    .card-avg{background:rgba(201,168,76,0.1);padding:6px 12px;border-radius:20px;font-size:13px;color:#c9a84c;font-weight:700;white-space:nowrap}
    .card-body{padding:16px 20px}
    .card-cat{font-size:12px;color:#888;margin-bottom:10px}
    .menu-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:14px}
    .menu-item:last-child{border:none}
    .item-name{flex:1}
    .item-price{color:#c9a84c;font-weight:700;margin-right:12px;white-space:nowrap}
    .price-range-bar{display:flex;align-items:center;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.06)}
    .price-range-bar .bar{flex:1;height:4px;background:#0a1628;border-radius:2px;overflow:hidden}
    .price-range-bar .bar-fill{height:100%;background:linear-gradient(to left,#c9a84c,#22c55e);border-radius:2px}
    .price-range-bar .range-text{font-size:11px;color:#888;white-space:nowrap}
    .show-more{display:block;width:100%;padding:10px;background:none;border:none;border-top:1px solid rgba(201,168,76,0.1);color:#c9a84c;font-family:inherit;font-size:13px;cursor:pointer;text-align:center}
    .show-more:hover{background:rgba(201,168,76,0.05)}

    .loading{text-align:center;padding:60px;color:#888;font-size:18px}
    .footer{background:#0d1117;padding:30px 20px;text-align:center;color:#555;font-size:13px;border-top:1px solid rgba(201,168,76,0.1);margin-top:40px}
    .footer a{color:#c9a84c}

    @media(max-width:768px){
      .hero{padding:30px 16px 25px}
      .hero h2{font-size:1.5rem}
      .container{padding:16px}
      .controls{flex-direction:column}
      .search-input,.filter-select{width:100%}
      .restaurant-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><h1>ğŸ™ï¸ ÙˆÙŠÙ† Ù†Ø±ÙˆØ­</h1></a>
      <a href="index.html" class="back-link">â† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>
  </header>

  <section class="hero">
    <h2>ğŸ’° <span>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</h2>
    <p>Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ø¹Ø§Ø± Ø´Ø§Ù…Ù„Ø© Ù„Ø£ÙƒØ«Ø± Ù…Ù† Ù¢Ù Ù  Ù…Ø·Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡ â€” Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„Ù…Ø·Ø¹Ù…</p>
    <div class="stats-bar" id="heroStats"></div>
  </section>

  <div class="container">
    <div class="budget-section">
      <div class="budget-label">
        <span>ğŸ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ù„Ù„Ø´Ø®Øµ</span>
        <span class="budget-value" id="budgetValue">Ù¥Ù Ù  Ø±.Ø³</span>
      </div>
      <input type="range" class="budget-slider" id="budgetSlider" min="0" max="500" value="500" step="10">
      <div class="budget-quick">
        <button class="budget-btn" data-val="30">Ù£Ù  Ø±.Ø³</button>
        <button class="budget-btn" data-val="50">Ù¥Ù  Ø±.Ø³</button>
        <button class="budget-btn" data-val="100">Ù¡Ù Ù  Ø±.Ø³</button>
        <button class="budget-btn" data-val="200">Ù¢Ù Ù  Ø±.Ø³</button>
        <button class="budget-btn active" data-val="500">Ø§Ù„ÙƒÙ„</button>
      </div>
    </div>

    <div class="controls">
      <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø·Ø¹Ù… Ø£Ùˆ ØµÙ†Ù...">
      <select class="filter-select" id="categoryFilter">
        <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
      </select>
      <select class="filter-select" id="sortSelect">
        <option value="cheapest">Ø§Ù„Ø£Ø±Ø®Øµ Ø£ÙˆÙ„Ø§Ù‹</option>
        <option value="expensive">Ø§Ù„Ø£ØºÙ„Ù‰ Ø£ÙˆÙ„Ø§Ù‹</option>
        <option value="name">Ø£Ø¨Ø¬Ø¯ÙŠ</option>
        <option value="items">Ø§Ù„Ø£ÙƒØ«Ø± Ø£ØµÙ†Ø§Ù</option>
      </select>
    </div>

    <div class="result-count" id="resultCount"></div>
    <div id="loading" class="loading">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
    <div class="restaurant-grid" id="grid"></div>
  </div>

  <footer class="footer">
    <p>âš ï¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªÙ‚Ø±ÙŠØ¨ÙŠØ© ÙˆÙ‚Ø¯ ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ø¹ ÙˆØ§Ù„ÙˆÙ‚Øª</p>
    <p style="margin-top:8px">ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ â€” <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a> | <a href="delivery-compare.html">Ù‚Ø§Ø±Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</a> | <a href="best.html">Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†</a></p>
  </footer>

<script>
const toAr = n => n.toString().replace(/\d/g, d => 'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©'[d]);

let allRestaurants = [];

async function loadData() {
  try {
    const [indexData, initialData, batch2Data, massData] = await Promise.all([
      fetch('data/prices-index.json').then(r => r.json()),
      fetch('data/prices-initial.json').then(r => r.json()),
      fetch('data/prices-batch2.json').then(r => r.json()),
      fetch('data/prices-mass.json').then(r => r.json())
    ]);

    const merged = new Map();

    // Process index (dict format)
    if (typeof indexData === 'object' && !Array.isArray(indexData)) {
      for (const [key, val] of Object.entries(indexData)) {
        merged.set(val.name_ar || val.name_en || key, val);
      }
    }

    // Process list formats
    for (const list of [initialData, batch2Data, massData]) {
      const arr = Array.isArray(list) ? list : (list.restaurants || []);
      for (const item of arr) {
        const key = item.name_ar || item.name_en;
        if (!key) continue;
        const existing = merged.get(key);
        if (existing) {
          // Merge menu items
          const existingItems = existing.menu_highlights || [];
          const newItems = item.menu_highlights || [];
          const itemSet = new Set(existingItems.map(i => i.item));
          for (const ni of newItems) {
            if (!itemSet.has(ni.item)) existingItems.push(ni);
          }
          existing.menu_highlights = existingItems;
          if (!existing.avg_per_person && item.avg_per_person) existing.avg_per_person = item.avg_per_person;
          if (!existing.category && item.category) existing.category = item.category;
          if (!existing.price_range && item.price_range) existing.price_range = item.price_range;
        } else {
          merged.set(key, { ...item });
        }
      }
    }

    allRestaurants = Array.from(merged.values());

    // Populate categories
    const cats = [...new Set(allRestaurants.map(r => r.category).filter(Boolean))].sort();
    const catSelect = document.getElementById('categoryFilter');
    cats.forEach(c => {
      const opt = document.createElement('option');
      opt.value = c; opt.textContent = c;
      catSelect.appendChild(opt);
    });

    // Stats
    const totalItems = allRestaurants.reduce((s, r) => s + (r.menu_highlights?.length || 0), 0);
    const avgPrices = allRestaurants.filter(r => r.avg_per_person).map(r => r.avg_per_person);
    const overallAvg = avgPrices.length ? Math.round(avgPrices.reduce((a,b)=>a+b,0)/avgPrices.length) : 0;

    document.getElementById('heroStats').innerHTML = `
      <div class="stat-item"><div class="num">${toAr(allRestaurants.length)}</div><div class="lbl">Ù…Ø·Ø¹Ù…</div></div>
      <div class="stat-item"><div class="num">${toAr(totalItems)}</div><div class="lbl">ØµÙ†Ù</div></div>
      <div class="stat-item"><div class="num">${toAr(overallAvg)}</div><div class="lbl">Ù…ØªÙˆØ³Ø· Ù„Ù„Ø´Ø®Øµ</div></div>
    `;

    document.getElementById('loading').style.display = 'none';
    renderGrid();
  } catch(e) {
    document.getElementById('loading').innerHTML = 'âŒ Ø®Ø·Ø£: ' + e.message;
  }
}

function renderGrid() {
  const query = document.getElementById('searchInput').value.trim().toLowerCase();
  const cat = document.getElementById('categoryFilter').value;
  const budget = parseInt(document.getElementById('budgetSlider').value);
  const sort = document.getElementById('sortSelect').value;

  let filtered = allRestaurants.filter(r => {
    if (cat && r.category !== cat) return false;
    if (budget < 500 && r.avg_per_person && r.avg_per_person > budget) return false;
    if (query) {
      const nameMatch = (r.name_ar||'').includes(query) || (r.name_en||'').toLowerCase().includes(query);
      const itemMatch = (r.menu_highlights||[]).some(i => i.item.includes(query));
      if (!nameMatch && !itemMatch) return false;
    }
    return true;
  });

  // Sort
  if (sort === 'cheapest') filtered.sort((a,b) => (a.avg_per_person||999) - (b.avg_per_person||999));
  else if (sort === 'expensive') filtered.sort((a,b) => (b.avg_per_person||0) - (a.avg_per_person||0));
  else if (sort === 'name') filtered.sort((a,b) => (a.name_ar||'').localeCompare(b.name_ar||'', 'ar'));
  else if (sort === 'items') filtered.sort((a,b) => (b.menu_highlights?.length||0) - (a.menu_highlights?.length||0));

  document.getElementById('resultCount').textContent = `Ø¹Ø±Ø¶ ${toAr(filtered.length)} Ù…Ø·Ø¹Ù… Ù…Ù† ${toAr(allRestaurants.length)}`;

  const grid = document.getElementById('grid');
  grid.innerHTML = filtered.map((r, idx) => {
    const items = r.menu_highlights || [];
    const displayItems = items.slice(0, 5);
    const hasMore = items.length > 5;
    const priceRange = r.price_range || [];
    const minP = Array.isArray(priceRange) ? priceRange[0] : 0;
    const maxP = Array.isArray(priceRange) ? priceRange[1] : 0;

    return `<div class="restaurant-card">
      <div class="card-header">
        <div>
          <div class="card-name">${r.name_ar || r.name_en || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
          ${r.name_en ? `<div class="card-name-en">${r.name_en}</div>` : ''}
        </div>
        ${r.avg_per_person ? `<div class="card-avg">~${toAr(r.avg_per_person)} Ø±.Ø³/Ø´Ø®Øµ</div>` : ''}
      </div>
      <div class="card-body">
        ${r.category ? `<div class="card-cat">ğŸ“‚ ${r.category} ${r.source ? '| ğŸ“ ' + r.source : ''}</div>` : ''}
        ${displayItems.map(item => `<div class="menu-item">
          <span class="item-name">${item.item}</span>
          <span class="item-price">${item.price ? toAr(item.price) + ' Ø±.Ø³' : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</span>
        </div>`).join('')}
        ${minP && maxP ? `<div class="price-range-bar">
          <span class="range-text">${toAr(minP)}</span>
          <div class="bar"><div class="bar-fill" style="width:${Math.min(100, (r.avg_per_person||minP)/maxP*100)}%"></div></div>
          <span class="range-text">${toAr(maxP)} Ø±.Ø³</span>
        </div>` : ''}
      </div>
      ${hasMore ? `<button class="show-more" onclick="toggleMore(this, ${idx})">Ø¹Ø±Ø¶ ${toAr(items.length - 5)} ØµÙ†Ù Ø¥Ø¶Ø§ÙÙŠ â†“</button>` : ''}
    </div>`;
  }).join('');

  window._filteredPrices = filtered;
}

function toggleMore(btn, idx) {
  const r = window._filteredPrices[idx];
  if (!r) return;
  const card = btn.parentElement;
  const body = card.querySelector('.card-body');
  const items = r.menu_highlights || [];

  if (btn.dataset.expanded === '1') {
    // Collapse
    const menuItems = body.querySelectorAll('.menu-item');
    menuItems.forEach((el, i) => { if (i >= 5) el.remove(); });
    btn.textContent = `Ø¹Ø±Ø¶ ${toAr(items.length - 5)} ØµÙ†Ù Ø¥Ø¶Ø§ÙÙŠ â†“`;
    btn.dataset.expanded = '0';
  } else {
    // Expand
    const rangeBar = body.querySelector('.price-range-bar');
    items.slice(5).forEach(item => {
      const div = document.createElement('div');
      div.className = 'menu-item';
      div.innerHTML = `<span class="item-name">${item.item}</span><span class="item-price">${item.price ? toAr(item.price) + ' Ø±.Ø³' : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</span>`;
      if (rangeBar) body.insertBefore(div, rangeBar);
      else body.appendChild(div);
    });
    btn.textContent = 'Ø¹Ø±Ø¶ Ø£Ù‚Ù„ â†‘';
    btn.dataset.expanded = '1';
  }
}

// Events
document.getElementById('searchInput').addEventListener('input', renderGrid);
document.getElementById('categoryFilter').addEventListener('change', renderGrid);
document.getElementById('sortSelect').addEventListener('change', renderGrid);
document.getElementById('budgetSlider').addEventListener('input', e => {
  const val = parseInt(e.target.value);
  document.getElementById('budgetValue').textContent = val >= 500 ? 'Ø§Ù„ÙƒÙ„' : toAr(val) + ' Ø±.Ø³';
  document.querySelectorAll('.budget-btn').forEach(b => b.classList.toggle('active', parseInt(b.dataset.val) === val));
  renderGrid();
});
document.querySelectorAll('.budget-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const val = parseInt(btn.dataset.val);
    document.getElementById('budgetSlider').value = val;
    document.getElementById('budgetSlider').dispatchEvent(new Event('input'));
  });
});

loadData();
</script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/riyadh-places/sw.js').catch(() => {});
    }
  </script>
</body>
</html>
