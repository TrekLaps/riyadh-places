<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="images/icon-192.svg">
  <title>Ø£Ø³Ø¹Ø§Ø± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª â€” Ù…Ù‚Ø§Ø±Ù†Ø© Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ 2026 | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­</title>
  <meta name="description" content="Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª ÙˆØ£Ù…Ø§ÙƒÙ† ØªØ±ÙÙŠÙ‡ Ø§Ù„Ø±ÙŠØ§Ø¶. Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø´Ø®ØµØŒ ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆØ§Ù„Ø­ÙŠ ÙˆØ§Ù„ÙØ¦Ø©. Ø£Ø³Ø¹Ø§Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ø­Ø¯Ø«Ø©.">
  <meta name="keywords" content="Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶, Ø£Ø³Ø¹Ø§Ø± ÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶, Ù…Ù‚Ø§Ø±Ù†Ø© Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶, Ø£Ø±Ø®Øµ Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶, Ù…ÙŠØ²Ø§Ù†ÙŠØ©">
  <link rel="canonical" href="https://treklaps.github.io/riyadh-places/prices.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Ø£Ø³Ø¹Ø§Ø± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª â€” Ø£Ø³Ø¹Ø§Ø± Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ 2026">
  <meta property="og:description" content="Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶. Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù…Ø¹ ÙÙ„ØªØ± Ù…ÙŠØ²Ø§Ù†ÙŠØ©.">
  <meta property="og:url" content="https://treklaps.github.io/riyadh-places/prices.html">
  <meta property="og:locale" content="ar_SA">
  <meta property="og:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ø£Ø³Ø¹Ø§Ø± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª â€” Ø£Ø³Ø¹Ø§Ø± Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ 2026">
  <meta name="twitter:description" content="Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶. Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù…Ø¹ ÙÙ„ØªØ± Ù…ÙŠØ²Ø§Ù†ÙŠØ©.">
  <meta name="twitter:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1628">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" href="data/places-light.json" as="fetch" crossorigin>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Tajawal',sans-serif;background:#0a1628;color:#e0e0e0;direction:rtl}
    .header{background:linear-gradient(135deg,#0a1628 0%,#1a2a4a 100%);padding:12px 20px;position:sticky;top:0;z-index:100}
    .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:auto}
    .logo{text-decoration:none;color:#c9a84c;display:flex;align-items:center;gap:8px}
    .logo h1{font-size:1.2rem;margin:0}
  </style>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* ===== Prices Page Styles ===== */
    .prices-hero {
      background: linear-gradient(135deg, var(--primary) 0%, #1a3a2a 50%, var(--primary-light) 100%);
      color: white;
      text-align: center;
      padding: 70px 20px 60px;
      position: relative;
      overflow: hidden;
    }
    .prices-hero::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 4px;
      background: linear-gradient(90deg, transparent, #27ae60, transparent);
    }
    .prices-hero h2 {
      font-size: 42px;
      font-weight: 900;
      margin-bottom: 14px;
      position: relative;
    }
    .prices-hero h2 span { color: #2ecc71; }
    .prices-hero p {
      font-size: 18px;
      color: rgba(255,255,255,0.7);
      max-width: 600px;
      margin: 0 auto;
      position: relative;
    }

    /* Controls */
    .prices-controls {
      max-width: var(--max-width);
      margin: -25px auto 20px;
      padding: 0 20px;
      position: relative;
      z-index: 10;
    }
    .controls-bar {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      border-top: 3px solid #27ae60;
    }
    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: flex-end;
      margin-bottom: 20px;
    }
    .controls-row:last-child { margin-bottom: 0; }
    .ctrl-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: 1;
      min-width: 180px;
    }
    .ctrl-group label {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--text-muted);
    }
    .ctrl-group select {
      padding: 10px 14px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-family: 'Tajawal', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      background: var(--sand);
      color: var(--text);
      cursor: pointer;
      direction: rtl;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: 14px center;
    }
    .ctrl-group select:focus {
      outline: none;
      border-color: var(--gold);
    }

    /* Budget Slider */
    .budget-slider-wrap {
      flex: 2;
      min-width: 280px;
    }
    .budget-slider-wrap label {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
    }
    .budget-value {
      color: #27ae60;
      font-weight: 800;
    }
    .budget-slider {
      width: 100%;
      height: 8px;
      -webkit-appearance: none;
      appearance: none;
      background: linear-gradient(to left, #27ae60, #e74c3c);
      border-radius: 4px;
      outline: none;
      margin-top: 8px;
    }
    .budget-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #27ae60;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .budget-slider::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #27ae60;
      cursor: pointer;
      border: 3px solid white;
    }

    /* Stats */
    .price-stats {
      max-width: var(--max-width);
      margin: 0 auto 20px;
      padding: 0 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 14px;
    }
    .stat-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow);
      border-top: 3px solid var(--gold);
    }
    .stat-card .stat-icon { font-size: 2rem; margin-bottom: 8px; }
    .stat-card .stat-value {
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--gold);
    }
    .stat-card .stat-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Table */
    .prices-table-wrap {
      max-width: var(--max-width);
      margin: 0 auto 40px;
      padding: 0 20px;
    }
    .prices-table-container {
      background: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    .prices-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }
    .prices-table thead {
      background: var(--primary);
      color: white;
    }
    .prices-table th {
      padding: 14px 16px;
      font-weight: 700;
      text-align: right;
      font-size: 0.85rem;
      white-space: nowrap;
    }
    .prices-table td {
      padding: 14px 16px;
      border-top: 1px solid var(--border);
      vertical-align: middle;
    }
    .prices-table tbody tr {
      transition: background 0.2s;
    }
    .prices-table tbody tr:hover {
      background: rgba(201,168,76,0.06);
    }
    .prices-table .place-name {
      font-weight: 700;
      color: var(--text);
    }
    .prices-table .place-name small {
      display: block;
      font-weight: 400;
      color: var(--text-muted);
      font-size: 0.8rem;
    }
    .price-cell {
      font-weight: 800;
      color: #27ae60;
      font-size: 1.05rem;
    }
    .price-level-cell {
      display: inline-flex;
      align-items: center;
      gap: 2px;
    }
    .price-level-cell .active-dollar {
      color: var(--gold);
      font-weight: 800;
    }
    .price-level-cell .inactive-dollar {
      color: var(--border);
    }
    .rating-cell {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .rating-cell .stars { color: var(--gold); font-size: 0.85rem; }
    .rating-cell .num { font-weight: 700; }

    /* Row rank */
    .row-rank {
      width: 28px;
      height: 28px;
      background: var(--primary);
      color: var(--gold);
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.8rem;
    }
    .row-rank.cheap { background: #27ae60; color: white; }

    /* Menu Highlights */
    .menu-highlights {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }
    .menu-item-tag {
      background: var(--sand);
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 0.75rem;
      color: var(--text-light);
      border: 1px solid var(--border);
      white-space: nowrap;
    }

    .no-results-prices {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .no-results-prices .emoji { font-size: 3rem; margin-bottom: 12px; }
    .no-results-prices h3 { color: var(--text); }

    @media (max-width: 768px) {
      .prices-hero { padding: 50px 16px 45px; }
      .prices-hero h2 { font-size: 28px; }
      .controls-row { flex-direction: column; }
      .ctrl-group { min-width: 100%; }
      .price-stats { grid-template-columns: repeat(2, 1fr); }
      .prices-table { font-size: 0.85rem; }
      .prices-table th, .prices-table td { padding: 10px 8px; }
      .menu-highlights { display: none; }
    }
  </style>
  <link rel="stylesheet" href="css/ramadan.css">
  <link rel="stylesheet" href="css/search-header.css">
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Ø£Ø³Ø¹Ø§Ø± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª â€” Ù…Ù‚Ø§Ø±Ù†Ø© Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ 2026 | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­",
  "url": "https://treklaps.github.io/riyadh-places/prices.html",
  "numberOfItems": 0,
  "itemListElement": []
}
  </script>
</head>
<body>

  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><span>ğŸ™ï¸</span><h1>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h1></a>
      <button class="dark-mode-toggle" aria-label="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
      <button class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">â˜°</button>
      <nav class="nav">
        <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª</a>
        <a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù…</a>
        <a href="activities.html">ØªØ±ÙÙŠÙ‡</a>
        <a href="events.html">ÙØ¹Ø§Ù„ÙŠØ§Øª</a>
        <a href="new-places.html">Ø¬Ø¯ÙŠØ¯</a>
        <a href="best.html">ğŸ† Ø§Ù„Ø£ÙØ¶Ù„</a>
        <a href="prices.html" class="active">ğŸ’° Ø£Ø³Ø¹Ø§Ø±</a>
        <a href="compare.html">âš–ï¸ Ù‚Ø§Ø±Ù†</a>
        <div class="nav-dropdown">
          <a href="#">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
          <div class="dropdown-menu">
            <a href="shopping.html">ğŸ›ï¸ ØªØ³ÙˆÙ‚</a>
            <a href="nature.html">ğŸï¸ Ø·Ø¨ÙŠØ¹Ø©</a>
            <a href="desserts.html">ğŸ° Ø­Ù„ÙˆÙŠØ§Øª</a>
            <a href="top-rated.html">â­ Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a>
            <div class="dropdown-divider"></div>
            <a href="neighborhoods.html">ğŸ˜ï¸ Ø£Ø­ÙŠØ§Ø¡ Ø§Ù„Ø±ÙŠØ§Ø¶</a>
            <a href="ramadan.html">ğŸŒ™ Ø±Ù…Ø¶Ø§Ù†</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <section class="prices-hero">
    <h2>ğŸ’° Ø£Ø³Ø¹Ø§Ø± <span>ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª</span></h2>
    <p>Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ù…Ø·Ø§Ø¹Ù… ÙˆÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ â€” Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø´Ø®Øµ Ù…Ø¹ ÙÙ„ØªØ± Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</p>
  </section>

  <div class="breadcrumb" style="max-width:var(--max-width);margin:16px auto 0;padding:0 20px;">
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span>â€º</span><strong>Ø£Ø³Ø¹Ø§Ø± ÙˆÙ…Ù‚Ø§Ø±Ù†Ø§Øª</strong>
  </div>

  <!-- Controls -->
  <div class="prices-controls">
    <div class="controls-bar">
      <div class="controls-row">
        <div class="ctrl-group">
          <label>ğŸ“‚ Ø§Ù„ÙØ¦Ø©</label>
          <select id="price-category">
            <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
            <option value="ÙƒØ§ÙÙŠÙ‡">â˜• ÙƒØ§ÙÙŠÙ‡Ø§Øª</option>
            <option value="Ù…Ø·Ø¹Ù…">ğŸ½ï¸ Ù…Ø·Ø§Ø¹Ù…</option>
            <option value="ØªØ±ÙÙŠÙ‡">ğŸ­ ØªØ±ÙÙŠÙ‡</option>
            <option value="Ø­Ù„ÙˆÙŠØ§Øª">ğŸ° Ø­Ù„ÙˆÙŠØ§Øª</option>
            <option value="ØªØ³ÙˆÙ‚">ğŸ›ï¸ ØªØ³ÙˆÙ‚</option>
          </select>
        </div>
        <div class="ctrl-group">
          <label>ğŸ“ Ø§Ù„Ø­ÙŠ</label>
          <select id="price-neighborhood">
            <option value="">ÙƒÙ„ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</option>
          </select>
        </div>
        <div class="ctrl-group">
          <label>ğŸ”„ Ø§Ù„ØªØ±ØªÙŠØ¨</label>
          <select id="price-sort">
            <option value="cheap">Ø§Ù„Ø£Ø±Ø®Øµ Ø£ÙˆÙ„Ø§Ù‹</option>
            <option value="expensive">Ø§Ù„Ø£ØºÙ„Ù‰ Ø£ÙˆÙ„Ø§Ù‹</option>
            <option value="rating">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</option>
            <option value="name">Ø§Ù„Ø§Ø³Ù…</option>
          </select>
        </div>
      </div>
      <div class="controls-row">
        <div class="ctrl-group budget-slider-wrap">
          <label>ğŸ’¸ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© <span class="budget-value" id="budget-display">500 Ø±.Ø³</span></label>
          <input type="range" class="budget-slider" id="budget-slider" min="0" max="500" value="500" step="10">
        </div>
      </div>
    </div>
  </div>

  <!-- Stats -->
  <div class="price-stats" id="price-stats">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-value" id="stat-count">--</div>
      <div class="stat-label">Ù…ÙƒØ§Ù†</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-value" id="stat-avg">--</div>
      <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø©</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“‰</div>
      <div class="stat-value" id="stat-min">--</div>
      <div class="stat-label">Ø£Ù‚Ù„ Ø³Ø¹Ø±</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“ˆ</div>
      <div class="stat-value" id="stat-max">--</div>
      <div class="stat-label">Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±</div>
    </div>
  </div>

  <!-- Table -->
  <div class="prices-table-wrap">
    <div class="prices-table-container">
      <table class="prices-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Ø§Ù„Ù…ÙƒØ§Ù†</th>
            <th>Ø§Ù„ÙØ¦Ø©</th>
            <th>Ø§Ù„Ø­ÙŠ</th>
            <th>Ù…ØªÙˆØ³Ø· Ù„Ù„Ø´Ø®Øµ</th>
            <th>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø¹Ø±</th>
            <th>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</th>
            <th>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</th>
          </tr>
        </thead>
        <tbody id="prices-tbody"></tbody>
      </table>
    </div>
    <div id="no-results" style="display:none;">
      <div class="no-results-prices">
        <div class="emoji">ğŸ”</div>
        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h3>
        <p>Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ± Ø£Ùˆ Ø±ÙØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</p>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
      <div>
        <h3>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h3>
        <p>Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù‚ÙˆÙ‚Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>
      </div>
    </div>
    <div class="footer-heart">ØµÙ†Ø¹ Ø¨Ù€ <span>â¤ï¸</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</div>
    <div class="footer-bottom"><p>Â© 2025-2026 ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
  </footer>

  <button class="scroll-top" id="scrollTop" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰">â†‘</button>

  <script defer src="js/darkmode.js"></script>
  <script defer src="js/main.js"></script>
  <script>
    let allPlaces = [];
    let pricesData = {};  // name_en -> price info from prices-initial.json

    const priceLevelToAvg = { 'Ù…Ø¬Ø§Ù†ÙŠ': 0, '$': 30, '$$': 75, '$$$': 150, '$$$$': 300 };
    const catIcons = { 'ÙƒØ§ÙÙŠÙ‡': 'â˜•', 'Ù…Ø·Ø¹Ù…': 'ğŸ½ï¸', 'ØªØ±ÙÙŠÙ‡': 'ğŸ­', 'Ø­Ù„ÙˆÙŠØ§Øª': 'ğŸ°', 'ØªØ³ÙˆÙ‚': 'ğŸ›ï¸', 'Ø·Ø¨ÙŠØ¹Ø©': 'ğŸï¸', 'Ø´Ø§Ù„ÙŠÙ‡': 'ğŸ¡', 'ÙÙ†Ø§Ø¯Ù‚': 'ğŸ¨', 'Ù…ÙˆÙ„Ø§Øª': 'ğŸ›ï¸', 'Ù…ØªØ§Ø­Ù': 'ğŸ›ï¸', 'ÙØ¹Ø§Ù„ÙŠØ§Øª': 'ğŸª' };

    function getAvgPrice(place) {
      // Check prices-initial.json first
      const priceInfo = pricesData[place.name_en] || pricesData[place.name_ar];
      if (priceInfo && priceInfo.avg_per_person) return priceInfo.avg_per_person;
      // Fallback to price_level estimation
      return priceLevelToAvg[place.price_level] || 0;
    }

    function getMenuHighlights(place) {
      const priceInfo = pricesData[place.name_en] || pricesData[place.name_ar];
      if (priceInfo && priceInfo.menu_highlights) return priceInfo.menu_highlights;
      return [];
    }

    function renderPriceDollars(level) {
      const map = { 'Ù…Ø¬Ø§Ù†ÙŠ': 0, '$': 1, '$$': 2, '$$$': 3, '$$$$': 4 };
      const n = map[level] || 0;
      let html = '';
      for (let i = 1; i <= 4; i++) {
        html += `<span class="${i <= n ? 'active-dollar' : 'inactive-dollar'}">$</span>`;
      }
      return html;
    }

    function renderTable() {
      const cat = document.getElementById('price-category').value;
      const hood = document.getElementById('price-neighborhood').value;
      const sort = document.getElementById('price-sort').value;
      const budget = parseInt(document.getElementById('budget-slider').value);

      let filtered = allPlaces.filter(p => {
        if (cat && p.category !== cat) return false;
        if (hood && p.neighborhood !== hood) return false;
        const avg = getAvgPrice(p);
        if (avg > budget && avg > 0) return false;
        return true;
      });

      // Sort
      filtered.sort((a, b) => {
        const avgA = getAvgPrice(a), avgB = getAvgPrice(b);
        if (sort === 'cheap') return avgA - avgB;
        if (sort === 'expensive') return avgB - avgA;
        if (sort === 'rating') return b.google_rating - a.google_rating;
        return (a.name_ar || '').localeCompare(b.name_ar || '', 'ar');
      });

      // Limit to 100 for performance
      const display = filtered.slice(0, 100);

      // Stats
      const avgs = display.map(p => getAvgPrice(p)).filter(a => a > 0);
      document.getElementById('stat-count').textContent = display.length;
      document.getElementById('stat-avg').textContent = avgs.length ? Math.round(avgs.reduce((s, v) => s + v, 0) / avgs.length) + ' Ø±.Ø³' : '--';
      document.getElementById('stat-min').textContent = avgs.length ? Math.min(...avgs) + ' Ø±.Ø³' : '--';
      document.getElementById('stat-max').textContent = avgs.length ? Math.max(...avgs) + ' Ø±.Ø³' : '--';

      const tbody = document.getElementById('prices-tbody');
      const noResults = document.getElementById('no-results');

      if (display.length === 0) {
        tbody.innerHTML = '';
        noResults.style.display = '';
        return;
      }
      noResults.style.display = 'none';

      tbody.innerHTML = display.map((p, i) => {
        const avg = getAvgPrice(p);
        const menu = getMenuHighlights(p);
        const menuHtml = menu.slice(0, 4).map(m => `<span class="menu-item-tag">${m.item} ${m.price}Ø±.Ø³</span>`).join('');
        const isCheap = avg > 0 && avg <= 50;

        return `<tr>
          <td><span class="row-rank ${isCheap ? 'cheap' : ''}">${i + 1}</span></td>
          <td class="place-name">
            ${p.name_ar}
            <small>${p.name_en || ''}</small>
          </td>
          <td>${catIcons[p.category] || 'ğŸ“'} ${p.category}</td>
          <td>${p.neighborhood || '--'}</td>
          <td class="price-cell">${avg > 0 ? avg + ' Ø±.Ø³' : (p.is_free ? 'Ù…Ø¬Ø§Ù†ÙŠ' : '--')}</td>
          <td><span class="price-level-cell">${renderPriceDollars(p.price_level)}</span></td>
          <td><div class="rating-cell"><span class="stars">â˜…</span><span class="num">${p.google_rating}</span></div></td>
          <td><div class="menu-highlights">${menuHtml || '<span style="color:var(--text-muted);font-size:0.8rem;">â€”</span>'}</div></td>
        </tr>`;
      }).join('');
    }

    document.addEventListener('DOMContentLoaded', async () => {
      // Load prices data
      try {
        const res = await fetch('data/prices-initial.json');
        if (res.ok) {
          const arr = await res.json();
          arr.forEach(p => {
            if (p.name_en) pricesData[p.name_en] = p;
            if (p.name_ar) pricesData[p.name_ar] = p;
          });
        }
      } catch(e) { void 0; }

      // Load places
      allPlaces = await loadPlaces();

      // Populate neighborhoods
      const hoods = [...new Set(allPlaces.map(p => p.neighborhood).filter(Boolean))].sort();
      const hoodSelect = document.getElementById('price-neighborhood');
      hoods.forEach(h => {
        const opt = document.createElement('option');
        opt.value = h;
        opt.textContent = h;
        hoodSelect.appendChild(opt);
      });

      // Budget slider
      const slider = document.getElementById('budget-slider');
      const budgetDisplay = document.getElementById('budget-display');
      slider.addEventListener('input', () => {
        budgetDisplay.textContent = slider.value + ' Ø±.Ø³';
        renderTable();
      });

      // Filters
      ['price-category', 'price-neighborhood', 'price-sort'].forEach(id => {
        document.getElementById(id).addEventListener('change', renderTable);
      });

      renderTable();
    });
  </script>
  <script>
    document.querySelectorAll('.nav-dropdown > a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) { e.preventDefault(); a.parentElement.classList.toggle('open'); }
      });
    });
  </script>
  <script src="js/ramadan.js" defer></script>
  <script src="js/analytics.js" defer></script>
  <script>
    if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(function(){});}
  </script>
</body>
</html>
