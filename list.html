<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="images/icon-192.svg">
  <title>Ù‚Ø§Ø¦Ù…Ø© Ù…Ø´ØªØ±ÙƒØ© | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</title>
  <meta name="description" content="Ù‚Ø§Ø¦Ù…Ø© Ø£Ù…Ø§ÙƒÙ† Ù…Ø´ØªØ±ÙƒØ© Ù…Ù† ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶. Ø§ÙƒØªØ´Ù Ø£Ù…Ø§ÙƒÙ† Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©!">
  <meta property="og:title" content="Ù‚Ø§Ø¦Ù…Ø© Ù…Ø´ØªØ±ÙƒØ© | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">
  <meta property="og:description" content="Ù‚Ø§Ø¦Ù…Ø© Ø£Ù…Ø§ÙƒÙ† Ù…Ø´ØªØ±ÙƒØ© Ù…Ù† ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶. Ø§ÙƒØªØ´Ù Ø£Ù…Ø§ÙƒÙ† Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©!">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ar_SA">
  <meta property="og:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://treklaps.github.io/riyadh-places/list.html">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1628">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" href="data/places-light.json" as="fetch" crossorigin>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Tajawal',sans-serif;background:#0a1628;color:#e0e0e0;direction:rtl}
    .header{background:linear-gradient(135deg,#0a1628 0%,#1a2a4a 100%);padding:12px 20px;position:sticky;top:0;z-index:100}
    .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:auto}
    .logo{text-decoration:none;color:#c9a84c;display:flex;align-items:center;gap:8px}
    .logo h1{font-size:1.2rem;margin:0}
  </style>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/filter-engine.css">
  <link rel="stylesheet" href="css/mvp-features.css">
  <link rel="stylesheet" href="css/search-header.css">
</head>
<body>

  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><span>ğŸ™ï¸</span><h1>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h1></a>
      <button class="dark-mode-toggle" aria-label="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
      <button class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">â˜°</button>
      <nav class="nav">
        <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª</a>
        <a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù…</a>
        <a href="activities.html">ØªØ±ÙÙŠÙ‡</a>
        <a href="events.html">ÙØ¹Ø§Ù„ÙŠØ§Øª</a>
        <a href="new-places.html">Ø¬Ø¯ÙŠØ¯</a>
        <a href="discover.html">ğŸ² ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ØŸ</a>
        <a href="lists.html">ğŸ“‹ Ù‚ÙˆØ§Ø¦Ù…ÙŠ</a>
        <a href="my-places.html">â¤ï¸ Ø£Ù…Ø§ÙƒÙ†ÙŠ</a>
        <div class="nav-dropdown">
          <a href="#">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
          <div class="dropdown-menu">
            <a href="shopping.html">ğŸ›ï¸ ØªØ³ÙˆÙ‚</a>
            <a href="nature.html">ğŸï¸ Ø·Ø¨ÙŠØ¹Ø©</a>
            <a href="desserts.html">ğŸ° Ø­Ù„ÙˆÙŠØ§Øª</a>
            <a href="top-rated.html">â­ Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a>
            <div class="dropdown-divider"></div>
            <a href="neighborhoods.html">ğŸ˜ï¸ Ø£Ø­ÙŠØ§Ø¡ Ø§Ù„Ø±ÙŠØ§Ø¶</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <section class="page-header">
    <h2>ğŸ“‹ <span id="list-title">Ù‚Ø§Ø¦Ù…Ø© Ù…Ø´ØªØ±ÙƒØ©</span></h2>
    <p id="list-subtitle">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©...</p>
  </section>

  <div class="container" style="max-width:1400px;margin:0 auto;padding:0 20px 40px">
    <div id="list-content">
      <div style="text-align:center;padding:40px;color:var(--text-muted);">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
      <div>
        <h3>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h3>
        <p>Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶. Ù…Ø­Ø¯Ø« ÙŠÙˆÙ…ÙŠØ§Ù‹.</p>
      </div>
      <div>
        <h3>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
        <ul>
          <li><a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="activities.html">ØªØ±ÙÙŠÙ‡ ÙˆØ£Ù†Ø´Ø·Ø©</a></li>
          <li><a href="favorites.html">â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</a></li>
          <li><a href="my-places.html">ğŸ—ºï¸ Ø£Ù…Ø§ÙƒÙ†ÙŠ</a></li>
        </ul>
      </div>
      <div>
        <h3>Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©</h3>
        <ul>
          <li><a href="sitemap.xml">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</a></li>
          <li><a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
          <li><a href="#">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-heart">ØµÙ†Ø¹ Ø¨Ù€ <span>â¤ï¸</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</div>
    <div class="footer-bottom"><p>Â© 2025-2026 ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
  </footer>

  <button class="scroll-top" id="scrollTop" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰">â†‘</button>

  <script defer src="js/darkmode.js"></script>
  <script defer src="js/main.js"></script>
  <script defer src="js/filter-engine.js"></script>
  <script defer src="js/mvp-features.js"></script>
  <script>
    document.querySelectorAll('.nav-dropdown > a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) { e.preventDefault(); a.parentElement.classList.toggle('open'); }
      });
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const sharedData = params.get('data') || params.get('shared');

      if (!sharedData) {
        document.getElementById('list-title').textContent = 'ğŸ˜• Ù…Ø§ Ù„Ù‚ÙŠÙ†Ø§ Ù‚Ø§Ø¦Ù…Ø©';
        document.getElementById('list-subtitle').textContent = 'Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ';
        document.getElementById('list-content').innerHTML = `
          <div style="text-align:center;padding:40px;color:var(--text-muted)">
            <div style="font-size:3rem;margin-bottom:12px">ğŸ“‹</div>
            <h3>Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­</h3>
            <p>Ù…Ù…ÙƒÙ† Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù†ØªÙ‡Ù‰ Ø£Ùˆ ÙÙŠÙ‡ Ø®Ø·Ø£</p>
            <a href="lists.html" style="display:inline-block;margin-top:16px;background:var(--gold);color:#fff;padding:10px 24px;border-radius:10px;text-decoration:none;font-weight:700;">Ø´ÙˆÙ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</a>
          </div>`;
        return;
      }

      // Decode the shared list
      let listData;
      try {
        const json = decodeURIComponent(escape(atob(decodeURIComponent(sharedData))));
        listData = JSON.parse(json);
      } catch (e) {
        document.getElementById('list-title').textContent = 'ğŸ˜• Ø®Ø·Ø£ Ø¨Ø§Ù„Ø±Ø§Ø¨Ø·';
        document.getElementById('list-subtitle').textContent = '';
        document.getElementById('list-content').innerHTML = `
          <div style="text-align:center;padding:40px;color:var(--text-muted)">
            <div style="font-size:3rem;margin-bottom:12px">âš ï¸</div>
            <h3>Ù…Ø§ Ù‚Ø¯Ø±Ù†Ø§ Ù†Ù‚Ø±Ø£ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
            <p>Ø¬Ø±Ø¨ ØªÙ†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©</p>
            <a href="index.html" style="display:inline-block;margin-top:16px;background:var(--gold);color:#fff;padding:10px 24px;border-radius:10px;text-decoration:none;font-weight:700;">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
          </div>`;
        return;
      }

      const listName = listData.n || 'Ù‚Ø§Ø¦Ù…Ø© Ù…Ø´ØªØ±ÙƒØ©';
      const listEmoji = listData.e || 'ğŸ“‹';
      const placeIds = listData.p || [];

      document.getElementById('list-title').textContent = listEmoji + ' ' + listName;
      document.getElementById('list-subtitle').textContent = placeIds.length + ' Ù…ÙƒØ§Ù†';
      document.title = listName + ' | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ';

      // Load places data
      const loadData = (typeof FilterEngine !== 'undefined' && FilterEngine.loadAllPlaces)
        ? FilterEngine.loadAllPlaces
        : (typeof loadPlaces === 'function' ? loadPlaces : null);

      if (!loadData) {
        document.getElementById('list-content').innerHTML = '<p style="text-align:center;color:var(--text-muted)">Ø®Ø·Ø£ Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>';
        return;
      }

      loadData().then(allPlaces => {
        const listPlaces = allPlaces.filter(p => placeIds.includes(p.id));
        const content = document.getElementById('list-content');

        if (listPlaces.length === 0) {
          content.innerHTML = `
            <div style="text-align:center;padding:40px;color:var(--text-muted)">
              <div style="font-size:3rem;margin-bottom:12px">ğŸ¤·â€â™‚ï¸</div>
              <h3>Ù…Ø§ Ù„Ù‚ÙŠÙ†Ø§ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†</h3>
              <p>Ù…Ù…ÙƒÙ† Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ØªØ­Ø°ÙØª Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
            </div>`;
          return;
        }

        // Banner with save + share
        let html = `<div class="shared-list-banner">
          <h3>${listEmoji} ${listName}</h3>
          <p>${listPlaces.length} Ù…ÙƒØ§Ù† Ù…Ø®ØªØ§Ø± Ø¨Ø¹Ù†Ø§ÙŠØ©</p>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap;">
            <button class="btn-save-shared" onclick="saveListLocally()">â¤ï¸ Ø§Ø­ÙØ¸Ù‡Ø§ Ø¹Ù†Ø¯ÙŠ</button>
            <button class="btn-save-shared" style="background:#25D366;color:#fff;" onclick="shareViaWhatsApp()">ğŸ“² Ø´Ø§Ø±Ùƒ ÙˆØ§ØªØ³Ø§Ø¨</button>
            <button class="btn-save-shared" style="background:var(--primary-light,#162040);" onclick="copyListLink()">ğŸ“‹ Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
          </div>
        </div>`;

        // Render cards
        const renderCard = (typeof FilterEngine !== 'undefined' && FilterEngine.createPlaceCard)
          ? FilterEngine.createPlaceCard : (typeof generatePlaceCard === 'function' ? generatePlaceCard : null);
        if (renderCard) {
          html += '<div class="cards-grid-v2">' + listPlaces.map(p => renderCard(p)).join('') + '</div>';
        }

        content.innerHTML = html;
      });

      // Helper functions
      window.saveListLocally = function() {
        try {
          const lists = JSON.parse(localStorage.getItem('wain_share_lists') || '[]');
          lists.unshift({
            id: 'list-' + Date.now().toString(36),
            name: listName,
            emoji: listEmoji,
            placeIds: placeIds,
            created: Date.now()
          });
          localStorage.setItem('wain_share_lists', JSON.stringify(lists));
          if (typeof showToast === 'function') showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©!');
          else alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©!');
        } catch(e) {
          alert('Ø­ØµÙ„ Ø®Ø·Ø£ Ø¨Ø§Ù„Ø­ÙØ¸');
        }
      };

      window.shareViaWhatsApp = function() {
        const text = listEmoji + ' ' + listName + '\n' + placeIds.length + ' Ù…ÙƒØ§Ù† Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶\n\n' + window.location.href + '\n\nÙ…Ù† Ù…ÙˆÙ‚Ø¹ ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ';
        window.open('https://wa.me/?text=' + encodeURIComponent(text), '_blank');
      };

      window.copyListLink = function() {
        navigator.clipboard.writeText(window.location.href).then(() => {
          if (typeof showToast === 'function') showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
          else alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
        }).catch(() => {
          prompt('Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·:', window.location.href);
        });
      };
    });
  </script>
  <script src="js/analytics.js" defer></script>
  <script>
    if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(function(){});}
  </script>
</body>
</html>
