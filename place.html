<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="fsoLYFcBn1bK30V4OvI0U5U78wsZx4LcBG8ADB28QXU" />
  <link rel="icon" type="image/svg+xml" href="images/icon-192.svg">
  <title id="page-title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙƒØ§Ù† | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</title>
  <meta name="description" id="page-description" content="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ â€” Ù…Ø·Ø§Ø¹Ù…ØŒ ÙƒØ§ÙÙŠÙ‡Ø§ØªØŒ ØªØ±ÙÙŠÙ‡ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯">
  <meta name="robots" content="index, follow">
  <link rel="canonical" id="page-canonical" href="https://treklaps.github.io/riyadh-places/place.html">

  <!-- Open Graph -->
  <meta property="og:type" content="place">
  <meta property="og:title" id="og-title" content="ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">
  <meta property="og:description" id="og-description" content="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶">
  <meta property="og:url" id="og-url" content="https://treklaps.github.io/riyadh-places/place.html">
  <meta property="og:locale" content="ar_SA">
  <meta property="og:image" id="og-image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <meta property="og:site_name" content="ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" id="tw-title" content="ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">
  <meta name="twitter:description" id="tw-description" content="Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø±ÙŠØ§Ø¶">
  <meta name="twitter:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1628">

  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" href="data/places-detail.json" as="fetch" crossorigin>

  <!-- Critical inline CSS -->
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Tajawal',sans-serif;background:#0a1628;color:#e0e0e0;direction:rtl;min-height:100vh}
    .header{background:linear-gradient(135deg,#0a1628 0%,#1a2a4a 100%);padding:12px 20px;position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(201,168,76,0.1)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:1400px;margin:auto}
    .logo{text-decoration:none;color:#c9a84c;display:flex;align-items:center;gap:8px}
    .logo h1{font-size:1.2rem;margin:0}

    /* Loading state */
    .place-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:16px}
    .place-loading .spinner{width:48px;height:48px;border:4px solid rgba(201,168,76,0.2);border-top-color:#c9a84c;border-radius:50%;animation:spin 0.8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Not found */
    .not-found{text-align:center;padding:80px 20px;min-height:60vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .not-found .emoji{font-size:64px;margin-bottom:16px}
    .not-found h2{color:#c9a84c;margin-bottom:12px;font-size:1.5rem}
    .not-found p{color:#8899aa;margin-bottom:24px}

    /* Hero */
    .place-hero{position:relative;height:320px;background:#111b2e;overflow:hidden}
    .place-hero-img{width:100%;height:100%;object-fit:cover;display:block}
    .place-hero-fallback{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:80px;background:linear-gradient(135deg,#0a1628 0%,#1a2a4a 50%,#0a1628 100%)}
    .place-hero-overlay{position:absolute;bottom:0;left:0;right:0;padding:24px 32px;background:linear-gradient(transparent,rgba(10,22,40,0.95))}
    .place-hero-badges{display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap}
    .place-hero-badges .badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700}
    .badge-category{background:rgba(201,168,76,0.2);color:#c9a84c;border:1px solid rgba(201,168,76,0.3)}
    .badge-trending{background:rgba(255,107,53,0.2);color:#ff6b35;border:1px solid rgba(255,107,53,0.3)}
    .badge-new{background:rgba(0,200,150,0.2);color:#00c896;border:1px solid rgba(0,200,150,0.3)}
    .badge-free{background:rgba(52,152,219,0.2);color:#3498db;border:1px solid rgba(52,152,219,0.3)}
    .place-hero h1{font-size:2rem;color:#fff;margin-bottom:4px;text-shadow:0 2px 8px rgba(0,0,0,0.5)}
    .place-hero .name-en{font-size:0.95rem;color:rgba(255,255,255,0.6);font-weight:400}
    .place-hero .hero-neighborhood{color:rgba(255,255,255,0.7);font-size:0.9rem;margin-top:6px}
    .place-hero .hero-neighborhood span{margin-left:12px}

    /* Main layout */
    .place-main{max-width:1200px;margin:0 auto;padding:24px 20px;display:grid;grid-template-columns:1fr 360px;gap:28px}

    /* Action bar */
    .action-bar{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:24px}
    .action-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;border-radius:12px;border:1px solid rgba(201,168,76,0.3);background:rgba(201,168,76,0.08);color:#c9a84c;text-decoration:none;font-family:'Tajawal',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s}
    .action-btn:hover{background:rgba(201,168,76,0.18);border-color:#c9a84c;transform:translateY(-1px)}
    .action-btn svg{width:18px;height:18px;fill:currentColor}
    .action-btn-primary{background:#c9a84c;color:#0a1628;border-color:#c9a84c}
    .action-btn-primary:hover{background:#d4b85c}

    /* Rating card */
    .rating-card{background:#111b2e;border-radius:16px;padding:20px;margin-bottom:24px;border:1px solid rgba(201,168,76,0.1)}
    .rating-card-inner{display:flex;align-items:center;gap:20px}
    .rating-big{text-align:center}
    .rating-big .number{font-size:48px;font-weight:800;color:#c9a84c;line-height:1}
    .rating-big .stars{color:#f1c40f;font-size:16px;margin-top:4px;letter-spacing:2px}
    .rating-big .count{font-size:13px;color:#8899aa;margin-top:4px}
    .rating-meta{flex:1}
    .rating-meta .google-label{display:inline-flex;align-items:center;gap:4px;background:rgba(66,133,244,0.1);color:#4285f4;padding:4px 10px;border-radius:8px;font-size:12px;font-weight:600;margin-bottom:8px}
    .rating-meta .review-quote{font-size:14px;color:#a0b0c0;font-style:italic;line-height:1.6;padding-right:12px;border-right:3px solid rgba(201,168,76,0.3)}

    /* Section blocks */
    .detail-section{background:#111b2e;border-radius:16px;padding:24px;margin-bottom:24px;border:1px solid rgba(201,168,76,0.08)}
    .detail-section h2{color:#c9a84c;font-size:1.15rem;margin-bottom:16px;display:flex;align-items:center;gap:8px}

    /* Description */
    .description-text{font-size:15px;line-height:1.9;color:#c0d0e0}

    /* Tags / Audience */
    .tags-list{display:flex;flex-wrap:wrap;gap:8px}
    .tag-chip{padding:6px 14px;border-radius:20px;background:rgba(201,168,76,0.1);color:#c9a84c;font-size:13px;border:1px solid rgba(201,168,76,0.2);cursor:default;transition:background 0.2s}
    .tag-chip:hover{background:rgba(201,168,76,0.2)}
    .tag-chip-audience{background:rgba(52,152,219,0.1);color:#5dade2;border-color:rgba(52,152,219,0.2)}
    .tag-chip-audience:hover{background:rgba(52,152,219,0.2)}

    /* Pros / Cons */
    .pros-cons{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .pros-list,.cons-list{list-style:none;padding:0}
    .pros-list li,.cons-list li{padding:8px 0;font-size:14px;line-height:1.6;display:flex;align-items:flex-start;gap:8px}
    .pros-list li::before{content:'ğŸ‘';flex-shrink:0}
    .cons-list li::before{content:'ğŸ‘';flex-shrink:0}

    /* Visit info grid */
    .visit-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
    .visit-item{background:rgba(201,168,76,0.05);border-radius:12px;padding:14px;text-align:center;border:1px solid rgba(201,168,76,0.1)}
    .visit-item .vi-icon{font-size:24px;margin-bottom:6px}
    .visit-item .vi-label{font-size:12px;color:#8899aa;margin-bottom:4px}
    .visit-item .vi-value{font-size:14px;color:#e0e0e0;font-weight:600}

    /* Map section */
    .map-container{border-radius:12px;overflow:hidden;height:220px;background:#111b2e;position:relative}
    .map-container iframe{width:100%;height:100%;border:0}
    .map-overlay-link{position:absolute;top:10px;left:10px;background:rgba(10,22,40,0.8);color:#c9a84c;padding:6px 12px;border-radius:8px;font-size:12px;text-decoration:none;font-weight:600;z-index:2;transition:background 0.2s}
    .map-overlay-link:hover{background:rgba(10,22,40,0.95)}

    /* Sidebar */
    .place-sidebar{}
    .sidebar-card{background:#111b2e;border-radius:16px;padding:20px;margin-bottom:20px;border:1px solid rgba(201,168,76,0.08)}
    .sidebar-card h3{color:#c9a84c;font-size:1rem;margin-bottom:14px}
    .info-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.05);font-size:14px}
    .info-row:last-child{border-bottom:0}
    .info-row .label{color:#8899aa}
    .info-row .value{color:#e0e0e0;font-weight:600;text-align:left;max-width:60%}

    /* Share buttons */
    .share-row{display:flex;gap:8px;flex-wrap:wrap}
    .share-btn{flex:1;min-width:80px;display:flex;align-items:center;justify-content:center;gap:6px;padding:10px;border-radius:10px;border:none;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s}
    .share-whatsapp{background:rgba(37,211,102,0.15);color:#25d366}
    .share-whatsapp:hover{background:rgba(37,211,102,0.25)}
    .share-twitter{background:rgba(29,161,242,0.15);color:#1da1f2}
    .share-twitter:hover{background:rgba(29,161,242,0.25)}
    .share-copy{background:rgba(201,168,76,0.15);color:#c9a84c}
    .share-copy:hover{background:rgba(201,168,76,0.25)}

    /* Similar places */
    .similar-section{max-width:1200px;margin:0 auto 40px;padding:0 20px}
    .similar-section h2{color:#c9a84c;font-size:1.2rem;margin-bottom:20px;display:flex;align-items:center;gap:8px}
    .similar-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
    .similar-card{background:#111b2e;border-radius:14px;padding:16px;border:1px solid rgba(201,168,76,0.08);text-decoration:none;color:inherit;transition:all 0.2s;display:block}
    .similar-card:hover{border-color:rgba(201,168,76,0.3);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,0.3)}
    .similar-card-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}
    .similar-card h3{font-size:1rem;color:#e0e0e0;margin-bottom:2px}
    .similar-card .sc-en{font-size:12px;color:#6a7a8a}
    .similar-card .sc-rating{text-align:center}
    .similar-card .sc-rating .num{font-size:20px;font-weight:800;color:#c9a84c}
    .similar-card .sc-rating .stars{font-size:11px;color:#f1c40f}
    .similar-card .sc-meta{display:flex;gap:12px;font-size:13px;color:#8899aa;margin-top:8px}

    /* Breadcrumb */
    .breadcrumb{max-width:1200px;margin:0 auto;padding:12px 20px;font-size:13px;color:#6a7a8a;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
    .breadcrumb a{color:#8899aa;text-decoration:none}
    .breadcrumb a:hover{color:#c9a84c}
    .breadcrumb .sep{color:#4a5a6a}

    /* Footer */
    .footer{background:#060e1a;border-top:1px solid rgba(201,168,76,0.1);padding:40px 20px 20px;margin-top:40px}
    .footer-inner{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:30px}
    .footer h3{color:#c9a84c;margin-bottom:12px;font-size:1rem}
    .footer p,.footer li,.footer a{color:#6a7a8a;font-size:14px;line-height:1.8}
    .footer a{text-decoration:none}
    .footer a:hover{color:#c9a84c}
    .footer ul{list-style:none;padding:0}
    .footer-heart{text-align:center;padding:20px 0 10px;color:#6a7a8a;font-size:14px}
    .footer-bottom{text-align:center;padding:10px 0;color:#4a5a6a;font-size:12px;border-top:1px solid rgba(255,255,255,0.05);margin-top:10px}

    /* Responsive */
    @media (max-width:768px) {
      .place-hero{height:240px}
      .place-hero h1{font-size:1.5rem}
      .place-hero-overlay{padding:16px 20px}
      .place-main{grid-template-columns:1fr;padding:16px}
      .rating-card-inner{flex-direction:column;text-align:center}
      .rating-meta .review-quote{border-right:0;padding-right:0;text-align:center}
      .pros-cons{grid-template-columns:1fr}
      .action-bar{justify-content:center}
      .similar-grid{grid-template-columns:1fr}
    }

    /* Nav styles */
    .nav{display:flex;gap:16px;align-items:center}
    .nav a{color:#a0b0c0;text-decoration:none;font-size:14px;transition:color 0.2s}
    .nav a:hover{color:#c9a84c}
    .menu-toggle,.dark-mode-toggle{background:none;border:none;color:#a0b0c0;font-size:20px;cursor:pointer;display:none}
    .nav-dropdown{position:relative}
    .dropdown-menu{display:none;position:absolute;top:100%;right:0;background:#111b2e;border:1px solid rgba(201,168,76,0.15);border-radius:12px;padding:8px 0;min-width:200px;z-index:200;box-shadow:0 8px 32px rgba(0,0,0,0.4)}
    .nav-dropdown:hover .dropdown-menu{display:block}
    .dropdown-menu a{display:block;padding:8px 16px;color:#a0b0c0;text-decoration:none;font-size:14px}
    .dropdown-menu a:hover{color:#c9a84c;background:rgba(201,168,76,0.05)}
    .dropdown-divider{height:1px;background:rgba(255,255,255,0.05);margin:4px 0}
    .dropdown-submenu{position:relative}
    .submenu{display:none;position:absolute;right:100%;top:0;background:#111b2e;border:1px solid rgba(201,168,76,0.15);border-radius:12px;padding:8px 0;min-width:160px;box-shadow:0 8px 32px rgba(0,0,0,0.4)}
    .dropdown-submenu:hover .submenu{display:block}

    @media (max-width:768px){
      .nav{display:none;position:fixed;top:0;right:0;bottom:0;width:280px;background:#0a1628;flex-direction:column;padding:60px 20px 20px;z-index:300;box-shadow:-4px 0 20px rgba(0,0,0,0.5)}
      .nav.open{display:flex}
      .menu-toggle{display:block}
      .dropdown-menu{position:static;display:none;box-shadow:none;border:0;background:transparent;padding-right:12px}
      .nav-dropdown.open .dropdown-menu{display:block}
      .submenu{position:static;box-shadow:none;border:0;background:transparent;padding-right:12px}
    }

    .scroll-top{position:fixed;bottom:20px;left:20px;width:44px;height:44px;border-radius:50%;background:#c9a84c;color:#0a1628;border:none;font-size:20px;cursor:pointer;opacity:0;transition:opacity 0.3s;z-index:100}
    .scroll-top.visible{opacity:1}
  </style>

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/ramadan.css">
  <link rel="stylesheet" href="css/search-header.css">

  <!-- Structured data placeholder â€” replaced dynamically -->
  <script type="application/ld+json" id="schema-ld">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶",
    "description": "Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Ø§Ù„Ø±ÙŠØ§Ø¶",
      "addressCountry": "SA"
    }
  }
  </script>
</head>
<body>

  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><span>ğŸ™ï¸</span><h1>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h1></a>
      <button class="dark-mode-toggle" aria-label="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
      <button class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" onclick="document.querySelector('.nav').classList.toggle('open')">â˜°</button>
      <nav class="nav">
        <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª</a>
        <a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù…</a>
        <a href="activities.html">ØªØ±ÙÙŠÙ‡</a>
        <a href="events.html">ÙØ¹Ø§Ù„ÙŠØ§Øª</a>
        <a href="new-places.html">Ø¬Ø¯ÙŠØ¯</a>
        <a href="discover.html">ğŸ² ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ØŸ</a>
        <a href="lists.html">ğŸ“‹ Ù‚ÙˆØ§Ø¦Ù…ÙŠ</a>
        <div class="nav-dropdown">
          <a href="#">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
          <div class="dropdown-menu">
            <a href="shopping.html">ğŸ›ï¸ ØªØ³ÙˆÙ‚</a>
            <a href="nature.html">ğŸï¸ Ø·Ø¨ÙŠØ¹Ø©</a>
            <a href="desserts.html">ğŸ° Ø­Ù„ÙˆÙŠØ§Øª</a>
            <a href="top-rated.html">â­ Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a>
            <div class="dropdown-divider"></div>
            <a href="events.html">ğŸ‡¸ğŸ‡¦ ÙŠÙˆÙ… Ø§Ù„ØªØ£Ø³ÙŠØ³</a>
            <a href="riyadh-season.html">âœ¨ Ù…ÙˆØ³Ù… Ø§Ù„Ø±ÙŠØ§Ø¶</a>
            <div class="dropdown-divider"></div>
            <div class="dropdown-submenu">
              <a href="neighborhoods.html">ğŸ˜ï¸ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</a>
              <div class="submenu">
                <a href="neighborhood-olaya.html">Ø­ÙŠ Ø§Ù„Ø¹Ù„ÙŠØ§</a>
                <a href="neighborhood-malqa.html">Ø­ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø§</a>
                <a href="neighborhood-hittin.html">Ø­ÙŠ Ø­Ø·ÙŠÙ†</a>
                <a href="neighborhood-yasmin.html">Ø­ÙŠ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†</a>
                <a href="neighborhood-rabee.html">Ø­ÙŠ Ø§Ù„Ø±Ø¨ÙŠØ¹</a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Breadcrumb -->
  <div class="breadcrumb" id="breadcrumb">
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <span class="sep">â€¹</span>
    <span id="bc-category">...</span>
    <span class="sep">â€¹</span>
    <strong id="bc-place">ØªØ­Ù…ÙŠÙ„...</strong>
  </div>

  <!-- Loading state (shown before JS loads data) -->
  <div id="place-loading" class="place-loading">
    <div class="spinner"></div>
    <p style="color:#8899aa;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙƒØ§Ù†...</p>
  </div>

  <!-- Not found state (hidden by default) -->
  <div id="place-not-found" class="not-found" style="display:none;">
    <div class="emoji">ğŸ˜•</div>
    <h2>Ø§Ù„Ù…ÙƒØ§Ù† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</h2>
    <p>Ù…Ø§ Ù„Ù‚ÙŠÙ†Ø§ Ù‡Ø§Ù„Ù…ÙƒØ§Ù† â€” Ù…Ù…ÙƒÙ† Ø§Ù„Ø±Ø§Ø¨Ø· Ù‚Ø¯ÙŠÙ… Ø£Ùˆ ÙÙŠÙ‡ Ø®Ø·Ø£</p>
    <a href="index.html" class="action-btn action-btn-primary">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  </div>

  <!-- Main content (hidden until data loads) -->
  <div id="place-content" style="display:none;">

    <!-- Hero Section -->
    <div class="place-hero" id="hero-section">
      <!-- Filled by JS -->
    </div>

    <!-- Main Layout: Content + Sidebar -->
    <div class="place-main">
      <div class="place-content-col">

        <!-- Action buttons -->
        <div class="action-bar" id="action-bar"></div>

        <!-- Rating Card -->
        <div class="rating-card" id="rating-card"></div>

        <!-- Description -->
        <div class="detail-section" id="description-section" style="display:none;">
          <h2>ğŸ“ Ø¹Ù† Ø§Ù„Ù…ÙƒØ§Ù†</h2>
          <p class="description-text" id="description-text"></p>
        </div>

        <!-- Tags & Audience -->
        <div class="detail-section" id="tags-section" style="display:none;">
          <h2>ğŸ·ï¸ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù€</h2>
          <div class="tags-list" id="tags-list"></div>
        </div>

        <!-- Pros & Cons -->
        <div class="detail-section" id="pros-cons-section" style="display:none;">
          <h2>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</h2>
          <div class="pros-cons" id="pros-cons"></div>
        </div>

        <!-- Visit Info -->
        <div class="detail-section" id="visit-section" style="display:none;">
          <h2>â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø©</h2>
          <div class="visit-grid" id="visit-grid"></div>
        </div>

        <!-- Map -->
        <div class="detail-section" id="map-section" style="display:none;">
          <h2>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</h2>
          <div class="map-container" id="map-container"></div>
        </div>

      </div>

      <!-- Sidebar -->
      <div class="place-sidebar">

        <!-- Quick Info -->
        <div class="sidebar-card" id="quick-info"></div>

        <!-- Share -->
        <div class="sidebar-card">
          <h3>ğŸ“¤ Ø´Ø§Ø±Ùƒ Ø§Ù„Ù…ÙƒØ§Ù†</h3>
          <div class="share-row" id="share-row"></div>
        </div>

        <!-- SEO text block -->
        <div class="sidebar-card" id="seo-text" style="display:none;">
          <p id="seo-paragraph" style="font-size:13px;color:#6a7a8a;line-height:1.8;"></p>
        </div>

      </div>
    </div>

    <!-- Reviews Section -->
    <div style="max-width:1200px;margin:0 auto;padding:0 20px;" id="reviews-container"></div>

    <!-- Popular Times -->
    <div style="max-width:1200px;margin:0 auto;padding:0 20px;" id="popular-times-container"></div>

    <!-- Similar Places -->
    <div class="similar-section" id="similar-section" style="display:none;">
      <h2>ğŸ”— Ø£Ù…Ø§ÙƒÙ† Ù…Ø´Ø§Ø¨Ù‡Ø©</h2>
      <div class="similar-grid" id="similar-grid"></div>
    </div>

  </div>

  <footer class="footer">
    <div class="footer-inner">
      <div>
        <h3>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h3>
        <p>Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶. Ù…Ø­Ø¯Ø« ÙŠÙˆÙ…ÙŠØ§Ù‹.</p>
      </div>
      <div>
        <h3>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
        <ul>
          <li><a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="activities.html">ØªØ±ÙÙŠÙ‡ ÙˆØ£Ù†Ø´Ø·Ø©</a></li>
          <li><a href="shopping.html">ØªØ³ÙˆÙ‚ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="nature.html">Ø·Ø¨ÙŠØ¹Ø© ÙˆØ±Ø­Ù„Ø§Øª</a></li>
          <li><a href="desserts.html">Ø­Ù„ÙˆÙŠØ§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="events.html">ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="top-rated.html">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a></li>
        </ul>
      </div>
      <div>
        <h3>Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©</h3>
        <ul>
          <li><a href="sitemap.xml">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</a></li>
          <li><a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
          <li><a href="#">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-heart">ØµÙ†Ø¹ Ø¨Ù€ <span>â¤ï¸</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</div>
    <div class="footer-bottom"><p>Â© 2025-2026 ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
  </footer>

  <button class="scroll-top" id="scrollTop" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰" onclick="window.scrollTo({top:0,behavior:'smooth'})">â†‘</button>

  <script defer src="js/main.js"></script>
  <script defer src="js/darkmode.js"></script>
  <script defer src="js/crowd.js"></script>
  <script defer src="js/reviews.js"></script>

  <script>
  (function() {
    'use strict';

    const BASE_URL = 'https://treklaps.github.io/riyadh-places';

    const catIcons = { 'ÙƒØ§ÙÙŠÙ‡':'â˜•','Ù…Ø·Ø¹Ù…':'ğŸ½ï¸','ØªØ±ÙÙŠÙ‡':'ğŸ­','ØªØ³ÙˆÙ‚':'ğŸ›ï¸','Ø·Ø¨ÙŠØ¹Ø©':'ğŸï¸','Ø­Ù„ÙˆÙŠØ§Øª':'ğŸ°','ÙØ¹Ø§Ù„ÙŠØ§Øª':'ğŸª','Ø´Ø§Ù„ÙŠÙ‡':'ğŸ•ï¸','ÙÙ†Ø§Ø¯Ù‚':'ğŸ¨','Ù…ÙˆÙ„Ø§Øª':'ğŸ›’','Ù…ØªØ§Ø­Ù':'ğŸ›ï¸' };
    const catNames = { 'cafe':'ÙƒØ§ÙÙŠÙ‡','restaurant':'Ù…Ø·Ø¹Ù…','activity':'ØªØ±ÙÙŠÙ‡','ÙƒØ§ÙÙŠÙ‡':'ÙƒØ§ÙÙŠÙ‡','Ù…Ø·Ø¹Ù…':'Ù…Ø·Ø¹Ù…','ØªØ±ÙÙŠÙ‡':'ØªØ±ÙÙŠÙ‡','ØªØ³ÙˆÙ‚':'ØªØ³ÙˆÙ‚','Ø·Ø¨ÙŠØ¹Ø©':'Ø·Ø¨ÙŠØ¹Ø©','Ø­Ù„ÙˆÙŠØ§Øª':'Ø­Ù„ÙˆÙŠØ§Øª','ÙØ¹Ø§Ù„ÙŠØ§Øª':'ÙØ¹Ø§Ù„ÙŠØ§Øª','Ø´Ø§Ù„ÙŠÙ‡':'Ø´Ø§Ù„ÙŠÙ‡','ÙÙ†Ø§Ø¯Ù‚':'ÙÙ†Ø§Ø¯Ù‚','Ù…ÙˆÙ„Ø§Øª':'Ù…ÙˆÙ„Ø§Øª','Ù…ØªØ§Ø­Ù':'Ù…ØªØ§Ø­Ù' };
    const catPages = { 'ÙƒØ§ÙÙŠÙ‡':'cafes.html','Ù…Ø·Ø¹Ù…':'restaurants.html','ØªØ±ÙÙŠÙ‡':'activities.html','ØªØ³ÙˆÙ‚':'shopping.html','Ø·Ø¨ÙŠØ¹Ø©':'nature.html','Ø­Ù„ÙˆÙŠØ§Øª':'desserts.html','ÙØ¹Ø§Ù„ÙŠØ§Øª':'events.html','Ø´Ø§Ù„ÙŠÙ‡':'activities.html','ÙÙ†Ø§Ø¯Ù‚':'activities.html','Ù…ÙˆÙ„Ø§Øª':'shopping.html','Ù…ØªØ§Ø­Ù':'activities.html' };
    const catGradients = { 'Ù…Ø·Ø¹Ù…':'linear-gradient(135deg,#c0392b,#e74c3c)','ÙƒØ§ÙÙŠÙ‡':'linear-gradient(135deg,#6F4E37,#A0785A)','ØªØ±ÙÙŠÙ‡':'linear-gradient(135deg,#8e44ad,#9b59b6)','Ø­Ù„ÙˆÙŠØ§Øª':'linear-gradient(135deg,#e84393,#fd79a8)','Ø·Ø¨ÙŠØ¹Ø©':'linear-gradient(135deg,#27ae60,#2ecc71)','ØªØ³ÙˆÙ‚':'linear-gradient(135deg,#2980b9,#3498db)','Ø´Ø§Ù„ÙŠÙ‡':'linear-gradient(135deg,#d35400,#e67e22)','ÙÙ†Ø§Ø¯Ù‚':'linear-gradient(135deg,#1a1a2e,#16213e)','Ù…ÙˆÙ„Ø§Øª':'linear-gradient(135deg,#2c3e50,#34495e)','Ù…ØªØ§Ø­Ù':'linear-gradient(135deg,#7f8c8d,#95a5a6)','ÙØ¹Ø§Ù„ÙŠØ§Øª':'linear-gradient(135deg,#f39c12,#f1c40f)' };

    function fmtNum(n) { return n ? n.toLocaleString('ar-SA') : 'â€”'; }
    function stars(r) {
      if (!r) return '';
      const full = Math.floor(r), half = r % 1 >= 0.3, empty = 5 - full - (half ? 1 : 0);
      return 'â˜…'.repeat(full) + (half ? 'â˜…' : '') + 'â˜†'.repeat(empty);
    }
    function safe(v, fallback) { return (v !== null && v !== undefined && v !== '') ? v : (fallback || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'); }
    function getParam(p) { return new URLSearchParams(window.location.search).get(p); }

    // Find place by id or slug name
    function findPlace(places, id) {
      if (!id) return null;
      return places.find(p => p.id === id) || places.find(p => p.id === id.toLowerCase()) || null;
    }

    // Update meta tags
    function updateMeta(place) {
      const title = place.name_ar + (place.google_rating ? ` | â­ ${place.google_rating}` : '') + ' | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ';
      const desc = `${place.name_ar}${place.neighborhood ? ' ÙÙŠ ' + place.neighborhood : ''}. ${place.google_rating ? 'ØªÙ‚ÙŠÙŠÙ… Ù‚ÙˆÙ‚Ù„ ' + place.google_rating : ''} ${place.review_count ? 'Ù…Ù† ' + fmtNum(place.review_count) + ' ØªÙ‚ÙŠÙŠÙ…' : ''}. ${(place.description_ar || '').slice(0,120)}`;
      const url = `${BASE_URL}/place.html?id=${place.id}`;

      document.getElementById('page-title').textContent = title;
      document.title = title;
      document.getElementById('page-description').content = desc;
      document.getElementById('page-canonical').href = url;
      document.getElementById('og-title').content = title;
      document.getElementById('og-description').content = desc;
      document.getElementById('og-url').content = url;
      document.getElementById('tw-title').content = title;
      document.getElementById('tw-description').content = desc;

      if (place.image_url) {
        document.getElementById('og-image').content = place.image_url;
      }
    }

    // Update structured data
    function updateSchema(place) {
      const schema = {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": place.name_en || place.name_ar,
        "alternateName": place.name_ar,
        "description": place.description_ar || '',
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Ø§Ù„Ø±ÙŠØ§Ø¶",
          "addressRegion": place.neighborhood_en || place.neighborhood || '',
          "addressCountry": "SA"
        }
      };
      if (place.lat && place.lng) {
        schema.geo = { "@type": "GeoCoordinates", "latitude": place.lat, "longitude": place.lng };
      }
      if (place.google_rating) {
        schema.aggregateRating = {
          "@type": "AggregateRating",
          "ratingValue": place.google_rating,
          "bestRating": "5",
          "worstRating": "1"
        };
        if (place.review_count) schema.aggregateRating.reviewCount = place.review_count;
      }
      if (place.price_level) schema.priceRange = place.price_level;
      if (place.google_maps_url) schema.url = place.google_maps_url;

      document.getElementById('schema-ld').textContent = JSON.stringify(schema);
    }

    // Render hero
    function renderHero(place) {
      const icon = catIcons[place.category] || 'ğŸ“';
      const gradient = catGradients[place.category] || 'linear-gradient(135deg,#0a1628,#1a2a4a)';
      const catName = catNames[place.category] || place.category || '';

      let badges = `<span class="badge badge-category">${icon} ${catName}</span>`;
      if (place.trending) badges += '<span class="badge badge-trending">ğŸ”¥ Ø±Ø§Ø¦Ø¬</span>';
      if (place.is_new) badges += '<span class="badge badge-new">âœ¨ Ø¬Ø¯ÙŠØ¯</span>';
      if (place.is_free) badges += '<span class="badge badge-free">ğŸ†“ Ù…Ø¬Ø§Ù†ÙŠ</span>';

      document.getElementById('hero-section').innerHTML = `
        ${place.image_url
          ? `<img class="place-hero-img" src="${place.image_url}" alt="${place.name_ar}" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">`
          : ''}
        <div class="place-hero-fallback" style="${place.image_url ? 'display:none;' : ''}background:${gradient}">
          <span>${icon}</span>
        </div>
        <div class="place-hero-overlay">
          <div class="place-hero-badges">${badges}</div>
          <h1>${place.name_ar}</h1>
          ${place.name_en ? `<div class="name-en">${place.name_en}</div>` : ''}
          <div class="hero-neighborhood">
            ${place.neighborhood ? `<span>ğŸ“ ${place.neighborhood}</span>` : ''}
            ${place.price_level ? `<span>ğŸ’° ${place.price_level}</span>` : ''}
          </div>
        </div>`;
    }

    // Render action buttons
    function renderActions(place) {
      let html = '';
      if (place.google_maps_url) {
        html += `<a href="${place.google_maps_url}" target="_blank" rel="noopener" class="action-btn action-btn-primary">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ØªÙˆØ¬ÙŠÙ‡</a>`;
      }
      if (place.lat && place.lng) {
        html += `<a href="https://www.google.com/maps/dir/?api=1&destination=${place.lat},${place.lng}" target="_blank" rel="noopener" class="action-btn">ğŸ§­ Ø§ØªØ¬Ø§Ù‡Ø§Øª</a>`;
      }
      if (place.phone) {
        html += `<a href="tel:${place.phone}" class="action-btn">ğŸ“ Ø§ØªØµÙ„</a>`;
      }
      if (place.website) {
        html += `<a href="${place.website}" target="_blank" rel="noopener" class="action-btn">ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>`;
      }
      if (place.instagram) {
        html += `<a href="${place.instagram}" target="_blank" rel="noopener" class="action-btn">ğŸ“¸ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…</a>`;
      }
      document.getElementById('action-bar').innerHTML = html;
    }

    // Render rating card
    function renderRating(place) {
      if (!place.google_rating) {
        document.getElementById('rating-card').style.display = 'none';
        return;
      }
      const quote = place.review_quote_ar || place.review_quote || '';
      document.getElementById('rating-card').innerHTML = `
        <div class="rating-card-inner">
          <div class="rating-big">
            <div class="number">${place.google_rating}</div>
            <div class="stars">${stars(place.google_rating)}</div>
            ${place.review_count ? `<div class="count">${fmtNum(place.review_count)} ØªÙ‚ÙŠÙŠÙ…</div>` : ''}
          </div>
          <div class="rating-meta">
            <div class="google-label">â­ ØªÙ‚ÙŠÙŠÙ… Google</div>
            ${quote ? `<div class="review-quote">"${quote}"</div>` : ''}
          </div>
        </div>`;
    }

    // Render description
    function renderDescription(place) {
      if (!place.description_ar) return;
      document.getElementById('description-section').style.display = '';
      document.getElementById('description-text').textContent = place.description_ar;
    }

    // Render tags + audience
    function renderTags(place) {
      const tags = [];
      if (place.perfect_for && place.perfect_for.length) tags.push(...place.perfect_for.map(t => ({text:t,type:''})));
      if (place.audience && place.audience.length) tags.push(...place.audience.map(t => ({text:t,type:'audience'})));
      if (!tags.length) return;

      document.getElementById('tags-section').style.display = '';
      document.getElementById('tags-list').innerHTML = tags.map(t =>
        `<span class="tag-chip ${t.type === 'audience' ? 'tag-chip-audience' : ''}">${t.text}</span>`
      ).join('');
    }

    // Render pros/cons
    function renderProsCons(place) {
      const pros = place.pros_ar || place.pros || [];
      const cons = place.cons_ar || place.cons || [];
      if (!pros.length && !cons.length) return;

      document.getElementById('pros-cons-section').style.display = '';
      let html = '';
      if (pros.length) {
        html += `<div><h3 style="color:#2ecc71;margin-bottom:10px;font-size:15px;">ğŸ‘ Ø§Ù„Ù†Ø§Ø³ ØªÙ…Ø¯Ø­</h3><ul class="pros-list">${pros.map(p => `<li>${p}</li>`).join('')}</ul></div>`;
      }
      if (cons.length) {
        html += `<div><h3 style="color:#e74c3c;margin-bottom:10px;font-size:15px;">ğŸ‘ Ø§Ù„Ù†Ø§Ø³ ØªÙ†ØªÙ‚Ø¯</h3><ul class="cons-list">${cons.map(c => `<li>${c}</li>`).join('')}</ul></div>`;
      }
      document.getElementById('pros-cons').innerHTML = html;
    }

    // Render visit info
    function renderVisitInfo(place) {
      const items = [];
      if (place.best_time) items.push({icon:'ğŸ•',label:'Ø£ÙØ¶Ù„ ÙˆÙ‚Øª',value:place.best_time});
      if (place.avg_spend) items.push({icon:'ğŸ’°',label:'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥Ù†ÙØ§Ù‚',value:place.avg_spend});
      if (place.price_level) items.push({icon:'ğŸ“Š',label:'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±',value:place.price_level + (place.price_level==='$'?' (Ø§Ù‚ØªØµØ§Ø¯ÙŠ)':place.price_level==='$$'?' (Ù…ØªÙˆØ³Ø·)':place.price_level==='$$$'?' (Ù…Ø±ØªÙØ¹)':place.price_level==='$$$$'?' (ÙØ§Ø®Ø±)':'')});
      if (place.review_count) items.push({icon:'ğŸ’¬',label:'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª',value:fmtNum(place.review_count)+' ØªÙ‚ÙŠÙŠÙ… Ø¹Ù„Ù‰ Ù‚ÙˆÙ‚Ù„'});

      if (!items.length) return;
      document.getElementById('visit-section').style.display = '';
      document.getElementById('visit-grid').innerHTML = items.map(i => `
        <div class="visit-item">
          <div class="vi-icon">${i.icon}</div>
          <div class="vi-label">${i.label}</div>
          <div class="vi-value">${i.value}</div>
        </div>
      `).join('');
    }

    // Render map
    function renderMap(place) {
      if (!place.lat || !place.lng) return;
      document.getElementById('map-section').style.display = '';
      const q = encodeURIComponent(place.name_en || place.name_ar);
      document.getElementById('map-container').innerHTML = `
        <iframe src="https://maps.google.com/maps?q=${place.lat},${place.lng}&z=15&output=embed" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade" title="Ù…ÙˆÙ‚Ø¹ ${place.name_ar}"></iframe>
        ${place.google_maps_url ? `<a href="${place.google_maps_url}" target="_blank" rel="noopener" class="map-overlay-link">ğŸ”— ÙØªØ­ ÙÙŠ Ù‚ÙˆÙ‚Ù„ Ù…Ø§Ø¨</a>` : ''}`;
    }

    // Render quick info sidebar
    function renderQuickInfo(place) {
      const rows = [
        {label:'Ø§Ù„Ø§Ø³Ù…',value:place.name_ar},
        {label:'Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ',value:place.name_en},
        {label:'Ø§Ù„ØªØµÙ†ÙŠÙ',value:catNames[place.category]||place.category},
        {label:'Ø§Ù„Ø­ÙŠ',value:place.neighborhood},
        {label:'ØªÙ‚ÙŠÙŠÙ… Ù‚ÙˆÙ‚Ù„',value:place.google_rating ? `â­ ${place.google_rating} / 5` : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'},
        {label:'Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª',value:place.review_count ? fmtNum(place.review_count) : 'ØºÙŠØ± Ù…ØªÙˆÙØ±'},
        {label:'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±',value:place.price_level||'ØºÙŠØ± Ù…ØªÙˆÙØ±'},
      ];
      if (place.avg_spend) rows.push({label:'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥Ù†ÙØ§Ù‚',value:place.avg_spend});
      if (place.best_time) rows.push({label:'Ø£ÙØ¶Ù„ ÙˆÙ‚Øª',value:place.best_time});
      rows.push({label:'Ø§Ù„Ø­Ø§Ù„Ø©',value:place.trending?'ğŸ”¥ Ø±Ø§Ø¦Ø¬':'âœ… Ù†Ø´Ø·'});

      document.getElementById('quick-info').innerHTML = `
        <h3>ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
        ${rows.map(r => `<div class="info-row"><span class="label">${r.label}</span><span class="value">${safe(r.value)}</span></div>`).join('')}`;
    }

    // Render share buttons
    function renderShare(place) {
      const url = `${BASE_URL}/place.html?id=${place.id}`;
      const text = `ğŸ™ï¸ ${place.name_ar}${place.google_rating ? '\nâ­ '+place.google_rating : ''}\nğŸ“ ${place.neighborhood||''}\n\n${(place.description_ar||'').slice(0,100)}\n\n${url}\n\nÙ…Ù† Ù…ÙˆÙ‚Ø¹ ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ`;
      const tweetText = `ğŸ™ï¸ ${place.name_ar}${place.google_rating ? ' â€” â­ '+place.google_rating : ''}\nğŸ“ ${place.neighborhood||''}`;

      document.getElementById('share-row').innerHTML = `
        <button class="share-btn share-whatsapp" onclick="window.open('https://wa.me/?text='+encodeURIComponent(\`${text.replace(/`/g,"\\`")}\`),'_blank')">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button class="share-btn share-twitter" onclick="window.open('https://twitter.com/intent/tweet?text='+encodeURIComponent(\`${tweetText.replace(/`/g,"\\`")}\`)+'&url='+encodeURIComponent('${url}'),'_blank')">ğ•</button>
        <button class="share-btn share-copy" onclick="navigator.clipboard.writeText('${url}');this.textContent='âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®';setTimeout(()=>this.textContent='ğŸ”— Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·',2000)">ğŸ”— Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>`;
    }

    // Render SEO paragraph
    function renderSEO(place) {
      const catName = catNames[place.category] || place.category || '';
      const parts = [
        `${place.name_ar}`,
        place.name_en ? `(${place.name_en})` : '',
        place.neighborhood ? `ÙŠÙ‚Ø¹ ÙÙŠ ${place.neighborhood} Ø¨Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø±ÙŠØ§Ø¶.` : 'ÙÙŠ Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø±ÙŠØ§Ø¶.',
        place.google_rating ? `Ø­Ø§ØµÙ„ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ… ${place.google_rating} Ù…Ù† 5 Ø¹Ù„Ù‰ Ù‚ÙˆÙ‚Ù„` : '',
        place.review_count ? `Ù…Ù† ${fmtNum(place.review_count)} ØªÙ‚ÙŠÙŠÙ… Ø­Ù‚ÙŠÙ‚ÙŠ.` : '',
        catName ? `ÙŠØ¹ØªØ¨Ø± Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ ØªØµÙ†ÙŠÙ "${catName}" Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶.` : '',
        place.trending ? 'ÙŠØ¹Ø¯ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø£ÙƒØ«Ø± Ø±ÙˆØ§Ø¬Ø§Ù‹ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶.' : '',
        place.is_new ? 'ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ù…Ø¤Ø®Ø±Ø§Ù‹ ÙƒÙ…ÙƒØ§Ù† Ø¬Ø¯ÙŠØ¯.' : '',
        'Ù†Ù†ØµØ­ Ø¨Ø²ÙŠØ§Ø±ØªÙ‡ ÙˆØ§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹ Ø¨Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙØ±ÙŠØ¯Ø© Ø§Ù„ØªÙŠ ÙŠÙ‚Ø¯Ù…Ù‡Ø§.'
      ];
      const text = parts.filter(Boolean).join(' ');
      document.getElementById('seo-text').style.display = '';
      document.getElementById('seo-paragraph').textContent = text;
    }

    // Render breadcrumb
    function renderBreadcrumb(place) {
      const catName = catNames[place.category] || place.category || '';
      const catPage = catPages[place.category] || 'index.html';
      document.getElementById('bc-category').innerHTML = `<a href="${catPage}">${catName}</a>`;
      document.getElementById('bc-place').textContent = place.name_ar;
    }

    // Render similar places
    function renderSimilar(allPlaces, place) {
      // Same category + same neighborhood first, then same category
      const sameNeighborhood = allPlaces.filter(p => p.id !== place.id && p.category === place.category && p.neighborhood === place.neighborhood);
      const sameCategory = allPlaces.filter(p => p.id !== place.id && p.category === place.category && p.neighborhood !== place.neighborhood);

      // Shuffle for variety
      const shuffle = arr => arr.sort(() => Math.random() - 0.5);
      const similar = [...shuffle(sameNeighborhood).slice(0,3), ...shuffle(sameCategory).slice(0,3)].slice(0,6);

      if (!similar.length) return;

      document.getElementById('similar-section').style.display = '';
      document.getElementById('similar-grid').innerHTML = similar.map(p => `
        <a href="place.html?id=${p.id}" class="similar-card">
          <div class="similar-card-top">
            <div>
              <h3>${p.name_ar}</h3>
              ${p.name_en ? `<div class="sc-en">${p.name_en}</div>` : ''}
            </div>
            ${p.google_rating ? `<div class="sc-rating"><div class="num">${p.google_rating}</div><div class="stars">${stars(p.google_rating)}</div></div>` : ''}
          </div>
          <div class="sc-meta">
            ${p.neighborhood ? `<span>ğŸ“ ${p.neighborhood}</span>` : ''}
            ${p.price_level ? `<span>ğŸ’° ${p.price_level}</span>` : ''}
            ${p.trending ? '<span>ğŸ”¥ Ø±Ø§Ø¦Ø¬</span>' : ''}
          </div>
        </a>
      `).join('');
    }

    // ===== MAIN INIT =====
    async function init() {
      const placeId = getParam('id');

      if (!placeId) {
        document.getElementById('place-loading').style.display = 'none';
        document.getElementById('place-not-found').style.display = '';
        return;
      }

      try {
        const response = await fetch('data/places-detail.json');
        if (!response.ok) throw new Error('Failed to load data');
        const allPlaces = await response.json();

        // Also store globally for main.js functions
        if (typeof window !== 'undefined') window._placesData = allPlaces;
        // Set placesData for main.js compatibility
        if (typeof placesData !== 'undefined') {
          try { placesData = allPlaces; } catch(e) {}
        }

        const place = findPlace(allPlaces, placeId);

        if (!place) {
          document.getElementById('place-loading').style.display = 'none';
          document.getElementById('place-not-found').style.display = '';
          return;
        }

        // Update everything
        updateMeta(place);
        updateSchema(place);
        renderBreadcrumb(place);
        renderHero(place);
        renderActions(place);
        renderRating(place);
        renderDescription(place);
        renderTags(place);
        renderProsCons(place);
        renderVisitInfo(place);
        renderMap(place);
        renderQuickInfo(place);
        renderShare(place);
        renderSEO(place);
        renderSimilar(allPlaces, place);

        // Hide loading, show content
        document.getElementById('place-loading').style.display = 'none';
        document.getElementById('place-content').style.display = '';

        // Try to load reviews (from reviews.js)
        try {
          if (typeof loadReviews === 'function') await loadReviews();
          if (typeof generateReviewsSection === 'function') {
            const reviewsHtml = generateReviewsSection(placeId);
            if (reviewsHtml) {
              document.getElementById('reviews-container').innerHTML = reviewsHtml;
              if (typeof initReviewsSlider === 'function') initReviewsSlider();
            }
          }
        } catch(e) {}

        // Popular times
        try {
          if (place.popular_times && typeof renderPopularTimes === 'function') {
            document.getElementById('popular-times-container').innerHTML = renderPopularTimes(place);
            if (typeof initPopularTimesTabs === 'function') initPopularTimesTabs();
          }
        } catch(e) {}

      } catch (error) {
        // error handled silently
        document.getElementById('place-loading').style.display = 'none';
        document.getElementById('place-not-found').style.display = '';
      }
    }

    // Run on DOM ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

    // Scroll to top button
    window.addEventListener('scroll', function() {
      const btn = document.getElementById('scrollTop');
      if (btn) btn.classList.toggle('visible', window.scrollY > 400);
    });
  })();
  </script>

  <!-- Mobile nav -->
  <script>
    document.querySelectorAll('.nav-dropdown > a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) {
          e.preventDefault();
          a.parentElement.classList.toggle('open');
        }
      });
    });
    document.querySelectorAll('.dropdown-submenu > a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) {
          e.preventDefault();
          a.nextElementSibling.style.display = a.nextElementSibling.style.display === 'block' ? 'none' : 'block';
        }
      });
    });
  </script>
  <script defer src="js/lists.js"></script>
  <script src="js/analytics.js" defer></script>
  <script src="js/ramadan.js" defer></script>
  <script>
    if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(function(){});}
  </script>
</body>
</html>
