<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex">
  <title>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª â€” ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1628">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .stats-hero {
      background: linear-gradient(135deg, var(--primary) 0%, #1a2d50 100%);
      color: white;
      padding: 40px 20px;
      text-align: center;
    }
    .stats-hero h1 { font-size: 28px; margin-bottom: 8px; }
    .stats-hero p { color: rgba(255,255,255,0.6); font-size: 14px; }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      max-width: 1000px;
      margin: -30px auto 30px;
      padding: 0 20px;
      position: relative;
      z-index: 2;
    }
    .stat-card {
      background: var(--card-bg, #fff);
      border-radius: var(--radius);
      padding: 24px 16px;
      text-align: center;
      box-shadow: var(--shadow);
      border-top: 3px solid var(--gold);
      transition: transform 0.2s;
    }
    .stat-card:hover { transform: translateY(-4px); }
    .stat-card .number {
      font-size: 40px;
      font-weight: 900;
      color: var(--primary);
      line-height: 1.1;
    }
    [data-theme="dark"] .stat-card .number { color: var(--gold); }
    .stat-card .label {
      color: var(--text-light);
      font-size: 14px;
      margin-top: 4px;
    }
    .stat-card .sub {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }
    
    .stats-section {
      max-width: 1000px;
      margin: 0 auto 30px;
      padding: 0 20px;
    }
    .stats-section h2 {
      color: var(--primary);
      font-size: 20px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    [data-theme="dark"] .stats-section h2 { color: var(--gold); }
    
    /* Chart */
    .chart-container {
      background: var(--card-bg, #fff);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      overflow-x: auto;
    }
    .chart-bar-wrapper {
      display: flex;
      align-items: flex-end;
      gap: 4px;
      height: 200px;
      min-width: fit-content;
      padding: 0 4px;
    }
    .chart-bar-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      min-width: 28px;
    }
    .chart-bar {
      width: 100%;
      max-width: 32px;
      background: linear-gradient(to top, var(--gold), var(--gold-light));
      border-radius: 4px 4px 0 0;
      min-height: 2px;
      transition: height 0.5s ease;
      position: relative;
    }
    .chart-bar:hover {
      opacity: 0.8;
    }
    .chart-bar-label {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 6px;
      white-space: nowrap;
      transform: rotate(-45deg);
      transform-origin: top right;
    }
    .chart-bar-value {
      font-size: 10px;
      color: var(--text-light);
      margin-bottom: 4px;
      font-weight: 700;
    }
    .chart-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 16px;
      font-size: 13px;
      color: var(--text-light);
    }
    .chart-legend span::before {
      content: '';
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 3px;
      margin-left: 6px;
      vertical-align: middle;
    }
    .legend-views::before { background: var(--gold); }
    .legend-visitors::before { background: var(--teal, #0891b2); }
    
    /* Table */
    .stats-table {
      width: 100%;
      background: var(--card-bg, #fff);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    .stats-table-row {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      gap: 12px;
      transition: background 0.2s;
    }
    .stats-table-row:hover { background: rgba(201,168,76,0.04); }
    .stats-table-row:last-child { border-bottom: none; }
    .stats-table-rank {
      width: 28px;
      height: 28px;
      background: var(--gold);
      color: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 12px;
      flex-shrink: 0;
    }
    .stats-table-rank.top3 { background: var(--gold); }
    .stats-table-rank:not(.top3) { background: var(--border); color: var(--text-light); }
    .stats-table-page {
      flex: 1;
      font-weight: 600;
      font-size: 14px;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .stats-table-count {
      font-weight: 800;
      color: var(--primary);
      font-size: 15px;
      font-variant-numeric: tabular-nums;
    }
    [data-theme="dark"] .stats-table-count { color: var(--gold); }
    .stats-table-bar {
      width: 100px;
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }
    .stats-table-bar-fill {
      height: 100%;
      background: var(--gold);
      border-radius: 3px;
      transition: width 0.5s ease;
    }
    
    /* Referrers */
    .referrer-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: var(--card-bg, #fff);
      border-radius: 20px;
      font-size: 13px;
      margin: 4px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    .referrer-chip .ref-count {
      background: var(--gold);
      color: var(--primary);
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: 800;
      font-size: 11px;
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .empty-state .emoji { font-size: 48px; margin-bottom: 12px; }
    .empty-state h3 { color: var(--text); margin-bottom: 8px; }
    
    .external-counters {
      background: var(--card-bg, #fff);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
    }
    .external-counter-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--border);
    }
    .external-counter-item:last-child { border-bottom: none; }
    .external-counter-item .page-name { font-weight: 600; font-size: 14px; }
    .external-counter-item img { height: 22px; }
  </style>
  <link rel="stylesheet" href="css/ramadan.css">
  <link rel="stylesheet" href="css/search-header.css">
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><span>ğŸ“Š</span><h1>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h1></a>
      <button class="dark-mode-toggle" aria-label="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
      <a href="index.html" style="color:var(--gold);font-size:14px;text-decoration:none;font-weight:600;">â† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>
  </header>

  <div class="stats-hero">
    <h1>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆÙŠÙ† Ù†Ø±ÙˆØ­</h1>
    <p>ØªØªØ¨Ø¹ Ù…Ø­Ù„ÙŠ â€” Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ØªØ¨Ù‚Ù‰ Ø¹Ù†Ø¯Ùƒ</p>
  </div>

  <!-- Summary Cards -->
  <div class="stats-grid" id="stats-summary">
    <div class="stat-card">
      <div class="number" id="stat-total-views">â€”</div>
      <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</div>
    </div>
    <div class="stat-card">
      <div class="number" id="stat-unique-visitors">â€”</div>
      <div class="label">Ø²ÙˆØ§Ø± ÙØ±ÙŠØ¯ÙˆÙ†</div>
    </div>
    <div class="stat-card">
      <div class="number" id="stat-today-views">â€”</div>
      <div class="label">Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
    </div>
    <div class="stat-card">
      <div class="number" id="stat-today-visitors">â€”</div>
      <div class="label">Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ…</div>
    </div>
    <div class="stat-card">
      <div class="number" id="stat-pages-count">â€”</div>
      <div class="label">ØµÙØ­Ø§Øª Ù…ÙØªØ§Ø¨ÙØ¹Ø©</div>
    </div>
    <div class="stat-card">
      <div class="number" id="stat-days-active">â€”</div>
      <div class="label">Ø£ÙŠØ§Ù… Ù†Ø´Ø·Ø©</div>
      <div class="sub" id="stat-first-seen"></div>
    </div>
  </div>

  <!-- Daily Chart -->
  <div class="stats-section">
    <h2>ğŸ“ˆ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø¢Ø®Ø± Ù£Ù  ÙŠÙˆÙ…)</h2>
    <div class="chart-container">
      <div class="chart-bar-wrapper" id="daily-chart"></div>
      <div class="chart-legend">
        <span class="legend-views">Ø²ÙŠØ§Ø±Ø§Øª</span>
        <span class="legend-visitors">Ø²ÙˆØ§Ø±</span>
      </div>
    </div>
  </div>

  <!-- Top Pages -->
  <div class="stats-section">
    <h2>ğŸ† Ø£ÙƒØ«Ø± Ø§Ù„ØµÙØ­Ø§Øª Ø²ÙŠØ§Ø±Ø©</h2>
    <div id="top-pages" class="stats-table"></div>
  </div>

  <!-- Referrers -->
  <div class="stats-section">
    <h2>ğŸ”— Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</h2>
    <div id="referrers"></div>
  </div>

  <!-- External Counters (legacy) -->
  <div class="stats-section">
    <h2>ğŸŒ Ø¹Ø¯Ø§Ø¯Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ© (SeeYouFarm)</h2>
    <div class="external-counters">
      <div class="external-counter-item">
        <span class="page-name">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2F&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
      <div class="external-counter-item">
        <span class="page-name">â˜• ÙƒØ§ÙÙŠÙ‡Ø§Øª</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2Fcafes.html&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
      <div class="external-counter-item">
        <span class="page-name">ğŸ½ï¸ Ù…Ø·Ø§Ø¹Ù…</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2Frestaurants.html&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
      <div class="external-counter-item">
        <span class="page-name">ğŸ‰ ØªØ±ÙÙŠÙ‡</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2Factivities.html&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
      <div class="external-counter-item">
        <span class="page-name">ğŸ›ï¸ ØªØ³ÙˆÙ‚</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2Fshopping.html&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
      <div class="external-counter-item">
        <span class="page-name">ğŸï¸ Ø·Ø¨ÙŠØ¹Ø©</span>
        <img src="https://hits.seeyoufarm.com/api/count/keep/badge.svg?url=https%3A%2F%2Ftreklaps.github.io%2Friyadh-places%2Fnature.html&count_bg=%230a1628&title_bg=%23c9a84c&title=views&edge_flat=true" alt="views">
      </div>
    </div>
  </div>

  <p style="text-align:center; color: var(--text-muted); margin: 30px 0; font-size: 13px;">
    ğŸ“ˆ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© (localStorage) â€” Ù„Ø§ ÙƒÙˆÙƒÙŠØ² ÙˆÙ„Ø§ ØªØªØ¨Ø¹ Ø®Ø§Ø±Ø¬ÙŠ<br>
    ğŸ’¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù…ØªØµÙØ­Ùƒ
  </p>

  <footer class="footer">
    <div class="footer-inner">
      <div>
        <h3>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h3>
        <p>Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶.</p>
      </div>
    </div>
    <div class="footer-heart">ØµÙ†Ø¹ Ø¨Ù€ <span>â¤ï¸</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</div>
    <div class="footer-bottom"><p>Â© 2025-2026 ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
  </footer>

  <script src="js/darkmode.js"></script>
  <script src="js/analytics.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof WaynroohAnalytics === 'undefined') {
        document.querySelector('.stats-hero p').textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ â€” ØªØµÙØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹!';
        return;
      }
      
      const A = WaynroohAnalytics;
      const summary = A.getSummary();
      const topPages = A.getTopPages(20);
      const dailyData = A.getDailyData(30);
      const referrers = A.getTopReferrers(10);
      
      // --- Summary cards ---
      const fmt = n => (n || 0).toLocaleString('ar-SA');
      document.getElementById('stat-total-views').textContent = fmt(summary.totalViews);
      document.getElementById('stat-unique-visitors').textContent = fmt(summary.totalUniqueVisitors);
      document.getElementById('stat-today-views').textContent = fmt(summary.todayViews);
      document.getElementById('stat-today-visitors').textContent = fmt(summary.todayVisitors);
      document.getElementById('stat-pages-count').textContent = fmt(topPages.length);
      
      // Days active
      const data = A.getData();
      const activeDays = Object.keys(data.daily || {}).length;
      document.getElementById('stat-days-active').textContent = fmt(activeDays);
      if (summary.firstSeen) {
        try {
          const d = new Date(summary.firstSeen);
          document.getElementById('stat-first-seen').textContent = 'Ù…Ù†Ø° ' + d.toLocaleDateString('ar-SA');
        } catch(e) {}
      }
      
      // --- Daily chart ---
      const chartEl = document.getElementById('daily-chart');
      const maxViews = Math.max(...dailyData.map(d => d.views), 1);
      
      if (dailyData.every(d => d.views === 0)) {
        chartEl.innerHTML = '<div style="text-align:center;width:100%;padding:40px;color:var(--text-muted);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙŠÙˆÙ…ÙŠØ© Ø¨Ø¹Ø¯</div>';
      } else {
        chartEl.innerHTML = dailyData.map(d => {
          const h = Math.max((d.views / maxViews) * 180, 2);
          return `
            <div class="chart-bar-item" title="${d.date}: ${d.views} Ø²ÙŠØ§Ø±Ø©ØŒ ${d.visitors} Ø²Ø§Ø¦Ø±">
              <div class="chart-bar-value">${d.views > 0 ? d.views : ''}</div>
              <div class="chart-bar" style="height:${h}px;"></div>
              <div class="chart-bar-label">${d.label}</div>
            </div>
          `;
        }).join('');
      }
      
      // --- Top pages ---
      const pagesEl = document.getElementById('top-pages');
      if (topPages.length === 0) {
        pagesEl.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ“­</div><h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</h3><p>ØªØµÙØ­ Ø¨Ø¹Ø¶ Ø§Ù„ØµÙØ­Ø§Øª ÙˆØ§Ø±Ø¬Ø¹ Ù‡Ù†Ø§!</p></div>';
      } else {
        const maxPageViews = topPages[0].views;
        const pageNames = {
          '/index.html': 'ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
          '/cafes.html': 'â˜• ÙƒØ§ÙÙŠÙ‡Ø§Øª',
          '/restaurants.html': 'ğŸ½ï¸ Ù…Ø·Ø§Ø¹Ù…',
          '/activities.html': 'ğŸ­ ØªØ±ÙÙŠÙ‡',
          '/shopping.html': 'ğŸ›ï¸ ØªØ³ÙˆÙ‚',
          '/nature.html': 'ğŸï¸ Ø·Ø¨ÙŠØ¹Ø©',
          '/desserts.html': 'ğŸ° Ø­Ù„ÙˆÙŠØ§Øª',
          '/events.html': 'ğŸª ÙØ¹Ø§Ù„ÙŠØ§Øª',
          '/new-places.html': 'ğŸ†• Ø¬Ø¯ÙŠØ¯',
          '/top-rated.html': 'â­ Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹',
          '/discover.html': 'ğŸ² Ø§ÙƒØªØ´Ù',
          '/neighborhoods.html': 'ğŸ˜ï¸ Ø£Ø­ÙŠØ§Ø¡',
          '/compare.html': 'âš–ï¸ Ù…Ù‚Ø§Ø±Ù†Ø©',
          '/favorites.html': 'â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©',
          '/search.html': 'ğŸ” Ø¨Ø­Ø«',
          '/stats.html': 'ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',
          '/about.html': 'â„¹ï¸ Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹',
        };
        
        pagesEl.innerHTML = topPages.map((p, i) => {
          const pct = (p.views / maxPageViews * 100).toFixed(0);
          const name = pageNames[p.page] || p.page.replace(/^\//, '').replace('.html', '');
          return `
            <div class="stats-table-row">
              <div class="stats-table-rank ${i < 3 ? 'top3' : ''}">${i + 1}</div>
              <div class="stats-table-page">${name}</div>
              <div class="stats-table-bar"><div class="stats-table-bar-fill" style="width:${pct}%"></div></div>
              <div class="stats-table-count">${fmt(p.views)}</div>
            </div>
          `;
        }).join('');
      }
      
      // --- Referrers ---
      const refEl = document.getElementById('referrers');
      if (referrers.length === 0) {
        refEl.innerHTML = '<div class="empty-state"><div class="emoji">ğŸ”—</div><p>Ù„Ù… ØªØ³Ø¬Ù„ Ù…ØµØ§Ø¯Ø± Ø²ÙŠØ§Ø±Ø§Øª Ø¨Ø¹Ø¯</p></div>';
      } else {
        const refIcons = {
          'direct': 'ğŸ”— Ù…Ø¨Ø§Ø´Ø±',
          'google.com': 'ğŸ” Google',
          'www.google.com': 'ğŸ” Google',
          't.co': 'ğŸ¦ Twitter/X',
          'twitter.com': 'ğŸ¦ Twitter/X',
          'x.com': 'ğŸ¦ X',
          'facebook.com': 'ğŸ“˜ Facebook',
          'www.facebook.com': 'ğŸ“˜ Facebook',
          'reddit.com': 'ğŸŸ  Reddit',
          'www.reddit.com': 'ğŸŸ  Reddit',
          'wa.me': 'ğŸ’¬ WhatsApp',
          'web.whatsapp.com': 'ğŸ’¬ WhatsApp',
        };
        refEl.innerHTML = '<div style="display:flex;flex-wrap:wrap;gap:4px;">' + 
          referrers.map(r => {
            const name = refIcons[r.source] || 'ğŸŒ ' + r.source;
            return `<div class="referrer-chip"><span>${name}</span><span class="ref-count">${fmt(r.count)}</span></div>`;
          }).join('') + '</div>';
      }
    });
  </script>
  <script src="js/ramadan.js" defer></script>
</body>
</html>
