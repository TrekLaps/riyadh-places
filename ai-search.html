<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="images/icon-192.svg">
  <link rel="canonical" href="https://treklaps.github.io/riyadh-places/ai-search.html">
  <title>Ø¨Ø­Ø« Ø°ÙƒÙŠ | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</title>
  <meta name="description" content="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ â€” Ù…Ø·Ø§Ø¹Ù…ØŒ ÙƒØ§ÙÙŠÙ‡Ø§ØªØŒ ØªØ±ÙÙŠÙ‡. Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙŠÙÙ‡Ù… ÙˆØ´ ØªØ¨ÙŠ!">
  <meta property="og:title" content="Ø¨Ø­Ø« Ø°ÙƒÙŠ | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">
  <meta property="og:description" content="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ â€” Ù…Ø·Ø§Ø¹Ù…ØŒ ÙƒØ§ÙÙŠÙ‡Ø§ØªØŒ ØªØ±ÙÙŠÙ‡. Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙŠÙÙ‡Ù… ÙˆØ´ ØªØ¨ÙŠ!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://treklaps.github.io/riyadh-places/ai-search.html">
  <meta property="og:locale" content="ar_SA">
  <meta property="og:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ø¨Ø­Ø« Ø°ÙƒÙŠ | ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ">
  <meta name="twitter:description" content="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¹Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ â€” Ù…Ø·Ø§Ø¹Ù…ØŒ ÙƒØ§ÙÙŠÙ‡Ø§ØªØŒ ØªØ±ÙÙŠÙ‡. Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙŠÙÙ‡Ù… ÙˆØ´ ØªØ¨ÙŠ!">
  <meta name="twitter:image" content="https://treklaps.github.io/riyadh-places/images/icon-512.svg">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/ramadan.css">
  <link rel="stylesheet" href="css/search-header.css">
  <style>
    .ai-hero {
      background: linear-gradient(135deg, #0a1628 0%, #1a2a4a 50%, #0a1628 100%);
      padding: 60px 20px 40px;
      text-align: center;
    }
    .ai-hero h2 { font-size: 2.2rem; margin-bottom: 8px; }
    .ai-hero h2 span { color: #c9a84c; }
    .ai-hero p { color: rgba(255,255,255,0.6); font-size: 1rem; margin-bottom: 30px; }
    
    .ai-search-box {
      max-width: 700px;
      margin: 0 auto;
      position: relative;
    }
    .ai-search-input {
      width: 100%;
      padding: 18px 24px 18px 50px;
      border: 2px solid #c9a84c;
      border-radius: 16px;
      background: #111b2e;
      color: #fff;
      font-size: 1.2rem;
      font-family: 'Tajawal', sans-serif;
      direction: rtl;
      outline: none;
      transition: all 0.3s;
    }
    .ai-search-input:focus { border-color: #e8c55a; box-shadow: 0 0 20px rgba(201,168,76,0.2); }
    .ai-search-input::placeholder { color: rgba(255,255,255,0.3); }
    .ai-search-icon {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.4rem;
    }

    .ai-suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 16px;
    }
    .ai-suggestion {
      background: rgba(201,168,76,0.15);
      border: 1px solid rgba(201,168,76,0.3);
      color: #c9a84c;
      padding: 6px 14px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
      font-family: 'Tajawal', sans-serif;
    }
    .ai-suggestion:hover { background: rgba(201,168,76,0.3); }

    .ai-response {
      max-width: 900px;
      margin: 20px auto;
      padding: 0 20px;
      display: none;
    }
    .ai-response-text {
      background: linear-gradient(135deg, #1a2a4a, #111b2e);
      border: 1px solid rgba(201,168,76,0.2);
      border-radius: 12px;
      padding: 16px 20px;
      color: #c9a84c;
      font-size: 1.05rem;
      margin-bottom: 16px;
    }
    .ai-filters-used {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 16px;
    }
    .ai-filter-tag {
      background: rgba(201,168,76,0.2);
      color: #c9a84c;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.8rem;
    }

    .ai-results { max-width: 900px; margin: 0 auto; padding: 0 20px 40px; }
    .ai-result-card {
      background: #111b2e;
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.2s;
      border: 1px solid transparent;
    }
    .ai-result-card:hover { transform: translateY(-2px); border-color: rgba(201,168,76,0.3); }
    .ai-result-info { flex: 1; }
    .ai-result-rank { color: #c9a84c; font-weight: bold; font-size: 1.2rem; margin-left: 16px; min-width: 30px; }
    .ai-result-name { font-size: 1.1rem; font-weight: 600; color: #fff; }
    .ai-result-name-en { font-size: 0.85rem; color: rgba(255,255,255,0.5); }
    .ai-result-meta { display: flex; gap: 12px; margin-top: 6px; flex-wrap: wrap; }
    .ai-result-meta span { font-size: 0.85rem; color: rgba(255,255,255,0.6); }
    .ai-result-rating { color: #c9a84c !important; font-weight: 600; }
    .ai-result-actions { display: flex; gap: 8px; }
    .ai-result-btn {
      background: rgba(201,168,76,0.15);
      border: 1px solid rgba(201,168,76,0.3);
      color: #c9a84c;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.8rem;
      text-decoration: none;
      font-family: 'Tajawal', sans-serif;
    }
    .ai-result-btn:hover { background: rgba(201,168,76,0.3); }
    .ai-no-results { text-align: center; padding: 40px; color: rgba(255,255,255,0.5); }

    @media (max-width: 600px) {
      .ai-hero h2 { font-size: 1.6rem; }
      .ai-search-input { font-size: 1rem; padding: 14px 18px 14px 40px; }
      .ai-result-card { flex-direction: column; align-items: flex-start; }
      .ai-result-actions { margin-top: 10px; }
    }
  </style>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo"><span>ğŸ™ï¸</span><h1>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h1></a>
      <button class="dark-mode-toggle" aria-label="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
      <button class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">â˜°</button>
      <nav class="nav">
        <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="best.html">ğŸ† Ø§Ù„Ø£ÙØ¶Ù„</a>
        <a href="prices.html">ğŸ’° Ø£Ø³Ø¹Ø§Ø±</a>
        <a href="delivery-compare.html">ğŸ›µ Ø§Ù„ØªÙˆØµÙŠÙ„</a>
        <a href="map.html">ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a>
        <a href="ai-search.html" class="active">ğŸ¤– Ø¨Ø­Ø« Ø°ÙƒÙŠ</a>
      </nav>
    </div>
  </header>

  <!-- AI Search Hero -->
  <section class="ai-hero">
    <h2>ğŸ¤– <span>Ø¨Ø­Ø« Ø°ÙƒÙŠ</span> Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ</h2>
    <p>Ù‚ÙˆÙ„ Ù„Ù†Ø§ ÙˆØ´ ØªØ¨ÙŠ ÙˆØ¨Ù†Ù„Ù‚ÙŠ Ù„Ùƒ Ø£ÙØ¶Ù„ Ù…ÙƒØ§Ù†!</p>
    
    <div class="ai-search-box">
      <input type="text" class="ai-search-input" id="aiSearchInput" 
             placeholder="Ù…Ø«Ø§Ù„: Ø£Ø¨ÙŠ Ù…Ø·Ø¹Ù… ÙŠØ§Ø¨Ø§Ù†ÙŠ Ø±Ø®ÙŠØµ Ø¨Ø§Ù„Ø¹Ù„ÙŠØ§..." 
             autocomplete="off">
      <span class="ai-search-icon">ğŸ”</span>
    </div>

    <div class="ai-suggestions">
      <span class="ai-suggestion" data-query="Ø£Ø¨ÙŠ Ù…Ø·Ø¹Ù… ÙŠØ§Ø¨Ø§Ù†ÙŠ Ø±Ø®ÙŠØµ Ø¨Ø§Ù„Ø¹Ù„ÙŠØ§">ğŸ£ Ù…Ø·Ø¹Ù… ÙŠØ§Ø¨Ø§Ù†ÙŠ Ø±Ø®ÙŠØµ Ø¨Ø§Ù„Ø¹Ù„ÙŠØ§</span>
      <span class="ai-suggestion" data-query="Ø£ÙØ¶Ù„ ÙƒØ§ÙÙŠÙ‡ Ù„Ù„Ø¯Ø±Ø§Ø³Ø©">â˜• ÙƒØ§ÙÙŠÙ‡ Ù‡Ø§Ø¯ÙŠ Ù„Ù„Ø¯Ø±Ø§Ø³Ø©</span>
      <span class="ai-suggestion" data-query="ÙˆÙŠÙ† Ø£Ù„Ù‚Ù‰ ÙƒÙ†Ø§ÙØ© Ø²ÙŠÙ†Ø©">ğŸ® ÙƒÙ†Ø§ÙØ© Ø²ÙŠÙ†Ø©</span>
      <span class="ai-suggestion" data-query="Ù…ÙƒØ§Ù† Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ Ù„Ù„Ø¹Ø´Ø§Ø¡">ğŸ•¯ï¸ Ø¹Ø´Ø§Ø¡ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ</span>
      <span class="ai-suggestion" data-query="Ø£Ù…Ø§ÙƒÙ† Ø£Ø·ÙØ§Ù„ Ù…Ø¬Ø§Ù†ÙŠØ©">ğŸ‘¶ Ø£Ù…Ø§ÙƒÙ† Ø£Ø·ÙØ§Ù„ Ù…Ø¬Ø§Ù†ÙŠØ©</span>
      <span class="ai-suggestion" data-query="Ø£ÙØ¶Ù„ 5 Ø¨Ø±Ø¬Ø± Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶">ğŸ” Ø£ÙØ¶Ù„ 5 Ø¨Ø±Ø¬Ø±</span>
      <span class="ai-suggestion" data-query="ÙƒØ§ÙÙŠÙ‡ Ø¨Ø§Ù„Ù…Ù„Ù‚Ø§">â˜• ÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ù„Ù‚Ø§</span>
      <span class="ai-suggestion" data-query="Ø£ÙØ¶Ù„ ÙØ·ÙˆØ± Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶">ğŸ¥ Ø£ÙØ¶Ù„ ÙØ·ÙˆØ±</span>
    </div>
  </section>

  <!-- Response Area -->
  <div class="ai-response" id="aiResponse">
    <div class="ai-response-text" id="aiResponseText"></div>
    <div class="ai-filters-used" id="aiFilters"></div>
  </div>

  <!-- Results -->
  <div class="ai-results" id="aiResults"></div>

  <script src="js/ai-search.js" defer></script>
  <script src="js/darkmode.js" defer></script>
  <script src="js/analytics.js" defer></script>
  <script>
    let allPlaces = [];

    // Load data
    fetch('data/places-light.json')
      .then(r => r.json())
      .then(data => { allPlaces = data; })
      .catch(e => void 0);

    const input = document.getElementById('aiSearchInput');
    const responseDiv = document.getElementById('aiResponse');
    const responseText = document.getElementById('aiResponseText');
    const filtersDiv = document.getElementById('aiFilters');
    const resultsDiv = document.getElementById('aiResults');

    let debounceTimer;

    input.addEventListener('input', function() {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => doSearch(this.value), 300);
    });

    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        clearTimeout(debounceTimer);
        doSearch(this.value);
      }
    });

    // Suggestion chips
    document.querySelectorAll('.ai-suggestion').forEach(chip => {
      chip.addEventListener('click', function() {
        const query = this.dataset.query;
        input.value = query;
        doSearch(query);
        input.focus();
      });
    });

    function doSearch(query) {
      if (!query || query.length < 2 || allPlaces.length === 0) {
        responseDiv.style.display = 'none';
        resultsDiv.innerHTML = '';
        return;
      }

      // Try AI search first
      const aiResult = WaynroohAI.search(allPlaces, query);
      let results = aiResult.results;

      // Fallback to fuzzy if no AI results
      if (results.length === 0) {
        results = WaynroohAI.fuzzySearch(allPlaces, query);
      }

      // Show response
      responseDiv.style.display = 'block';
      
      if (aiResult.filters.matchedFilters.length > 0) {
        responseText.textContent = 'ğŸ¤– ' + aiResult.responseText;
        filtersDiv.innerHTML = aiResult.filters.matchedFilters
          .map(f => `<span class="ai-filter-tag">${f}</span>`).join('');
      } else if (results.length > 0) {
        responseText.textContent = `ğŸ” Ù„Ù‚ÙŠØª ${results.length} Ù†ØªÙŠØ¬Ø© Ù„Ù€ "${query}"`;
        filtersDiv.innerHTML = '';
      } else {
        responseText.textContent = 'ğŸ˜• Ù…Ø§ Ù„Ù‚ÙŠØª Ù†ØªØ§Ø¦Ø¬ â€” Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ø«Ø§Ù†ÙŠØ©';
        filtersDiv.innerHTML = '';
      }

      // Render results
      resultsDiv.innerHTML = results.map((p, i) => `
        <div class="ai-result-card">
          <span class="ai-result-rank">${i + 1}</span>
          <div class="ai-result-info">
            <div class="ai-result-name">${p.name_ar || p.name_en}</div>
            <div class="ai-result-name-en">${p.name_en || ''}</div>
            <div class="ai-result-meta">
              <span class="ai-result-rating">â­ ${p.google_rating || 'â€”'}</span>
              <span>${p.price_level || ''}</span>
              <span>ğŸ“ ${p.neighborhood || ''}</span>
              <span>${p.category_ar || p.category || ''}</span>
            </div>
          </div>
          <div class="ai-result-actions">
            ${p.google_maps_url ? `<a href="${p.google_maps_url}" target="_blank" class="ai-result-btn">ğŸ“ Ø®Ø±ÙŠØ·Ø©</a>` : ''}
          </div>
        </div>
      `).join('');
    }
  </script>
  <script>
    if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js').catch(function(){});}
  </script>
  <footer class="footer">
    <div class="footer-inner">
      <div>
        <h3>ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ</h3>
        <p>Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù‚ÙˆÙ‚Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©. Ù…Ø­Ø¯Ø« ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª.</p>
      </div>
      <div>
        <h3>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
        <ul>
          <li><a href="cafes.html">ÙƒØ§ÙÙŠÙ‡Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="restaurants.html">Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="activities.html">ØªØ±ÙÙŠÙ‡ ÙˆØ£Ù†Ø´Ø·Ø©</a></li>
          <li><a href="shopping.html">ØªØ³ÙˆÙ‚ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="nature.html">Ø·Ø¨ÙŠØ¹Ø© ÙˆØ±Ø­Ù„Ø§Øª</a></li>
          <li><a href="desserts.html">Ø­Ù„ÙˆÙŠØ§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="events.html">ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø±ÙŠØ§Ø¶</a></li>
          <li><a href="top-rated.html">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a></li>
          <li><a href="trending.html">Ù‡Ø§Ø¨Ù‘ Ø§Ù„Ø­ÙŠÙ† ğŸ”¥</a></li>
          <li><a href="new-places.html">Ø£Ù…Ø§ÙƒÙ† Ø¬Ø¯ÙŠØ¯Ø©</a></li>
        </ul>
      </div>
      <div>
        <h3>Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©</h3>
        <ul>
          <li><a href="sitemap.xml">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</a></li>
          <li><a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
          <li><a href="#">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-heart">ØµÙ†Ø¹ Ø¨Ù€ <span>â¤ï¸</span> ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</div>
    <div class="footer-bottom"><p>Â© 2025-2026 ÙˆÙŠÙ† Ù†Ø±ÙˆØ­ Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶ØŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
  </footer>
  <script src="js/main.js" defer></script>
</body>
</html>
